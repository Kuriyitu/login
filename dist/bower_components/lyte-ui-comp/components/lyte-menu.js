Lyte.Component.register("lyte-menu",{_template:'<template tag-name="lyte-menu">\n\t<lyte-menu-box class="{{ltPropWrapperClass}}" onmousemove="{{action( \'mousemove\', event, this )}}">\n\t\t<template is="if" value="{{ltPropBindToBody}}"><template case="true">\n\t\t\t<template is="if" value="{{expHandlers(ltPropYield,\'==\',false)}}"><template case="true">\n\t\t\t\t\t<lyte-menu-body id="{{ltPropId}}" class="{{ltPropClass}}" tabindex="1">\n\t\t\t\t\t\t<template is="for" items="{{ltPropContent}}" item="menu" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(menu)}}"><template case="true">\n\t\t\t\t\t\t\t\t\t        <lyte-menu-group elemorder="{{indexVal}}">\n\n\t\t\t\t\t\t\t\t\t        \t<template is="if" value="{{lyteUiReturnOnlyKey(menu)}}"><template case="true">\n\t\t\t\t\t\t\t\t\t\t           <lyte-menu-header>\n\t\t\t\t\t\t\t\t\t\t           \t\t\t{{lyteUiReturnOnlyKey(menu)}}\n\t\t\t\t\t\t\t\t\t\t           </lyte-menu-header>\n\t\t\t\t\t\t\t\t\t           \t</template></template>\n\t\t\t\t\t\t\t\t\t              <template is="for" items="{{lyteUiReturnOnlyValue(menu)}}" item="menu1" index="indexVal1"><template is="if" value="{{expHandlers(lyteUiIsObject(menu1),\'==\',false)}}"><template case="true">\n\t\t\t\t\t\t\t\t                                   <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" data-value="{{menu1}}">\n\t\t\t\t\t\t\t\t                                          <lyte-menu-label>{{menu1}}</lyte-menu-label>\n\t\t\t\t\t\t\t\t                                    </lyte-menu-item>\n\t\t\t\t\t\t\t\t\t                          </template><template case="false">\n\t\t\t\t\t\t\t                                      <lyte-menu-item grporder="{{indexVal}}" elemorder="{{indexVal1}}" id="{{menu1.id}}" class="{{menu1.class}}" data-value="{{menu1[ltPropSystemValue]}}">\n\t\t\t\t\t\t\t                                          <lyte-menu-label>{{menu1[ltPropUserValue]}}</lyte-menu-label>\n\t\t\t\t\t\t\t                                              <template is="if" value="{{menu1[ltPropDescription]}}"><template case="true">\n\t\t\t\t\t\t\t                                                  <lyte-menu-description> {{menu1[ltPropDescription]}}</lyte-menu-description>\n\t\t\t\t\t\t\t                                              </template></template>\n\t\t\t\t\t\t\t                                      </lyte-menu-item>\n\t\t\t\t\t\t\t                                </template></template></template>\n\t\t\t\t\t\t\t\t\t      </lyte-menu-group>\n\t\t\t\t\t\t\t      </template><template case="false"><template is="if" value="{{expHandlers(lyteUiIsObject(menu),\'==\',false)}}"><template case="true">\n\t\t\t\t\t                         <lyte-menu-item elemorder="{{indexVal}}" data-value="{{menu}}">\n\t\t\t\t\t                                <lyte-menu-label>{{menu}}</lyte-menu-label>\n\t\t\t\t\t                          </lyte-menu-item>\n\t\t\t\t\t\t                  </template><template case="false">\n\t\t\t\t\t\t                        <lyte-menu-item elemorder="{{indexVal}}" id="{{menu.id}}" class="{{menu.class}}" data-value="{{menu[ltPropSystemValue]}}">\n\t\t\t\t\t\t                            <lyte-menu-label>{{menu[ltPropUserValue]}}</lyte-menu-label>\n\t\t\t\t\t\t                                <template is="if" value="{{menu[ltPropDescription]}}"><template case="true">\n\t\t\t\t\t\t                                    <lyte-menu-description> {{menu[ltPropDescription]}}</lyte-menu-description>\n\t\t\t\t\t\t                                </template></template>\n\t\t\t\t\t\t                        </lyte-menu-item>\n\t\t\t\t\t\t                  </template></template></template></template></template>\n\t\t\t\t    </lyte-menu-body>\n\t\t\t      </template><template case="false">\n\t\t\t   \t\t\t<lyte-yield yield-name="yield"></lyte-yield>\n\t\t\t   \t   </template></template>\n\t\t\t </template></template>  \t   \n\t   </lyte-menu-box>\t   \t    \n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"for",position:[1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"text",position:[1,1]},{type:"componentDynamic",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"insertYield",position:[1]}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1]}],_observedAttributes:["ltPropContent","ltPropId","ltPropClass","ltPropQuery","ltPropEvent","ltPropYield","ltPropUserValue","ltPropSystemValue","ltPropCallout","ltPropPosition","ltPropDescription","ltPropTabIndex","ltPropFreeze","ltPropShow","ltPropWidth","ltPropHeight","ltPropQueryClass","ltPropBoundary","ltPropScope","ltPropPreventInsideClick","ltPropAnimate","ltPropSetCss","ltPropWrapperClass","ltPropWrapperId","ltPropBindToBody","ltPropAria","ltPropAriaAttributes","ltPropOffset","ltPropHeightResetOnScroll","eventListeners","pos","parIndex","lyteUnbound"],init:function(){var t=this.getData("ltPropEvent"),e=this.checkElementForMenu.bind(this);if(this.setData("eventListeners.event",e),this._close=this.closing.bind(this),this._trsend=this.tranEnd.bind(this),this._hoverclose=this.hoverClose.bind(this),document.addEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(t)?"mousemove":t,e,!0),!document.getElementsByClassName("lytemenufreezelayer")[0]&&this.getData("ltPropFreeze")){this.appendFreeze.call(this,"lytemenufreezelayer left lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer top lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer bottom lyteMenuHidden"),this.appendFreeze.call(this,"lytemenufreezelayer right lyteMenuHidden");var i=this.appendFreeze.call(this,"lytemenufreezelayer nogroup lyteMenuHidden");i.addEventListener("wheel",this.preventEvent),i.addEventListener("touchmove",this.preventEvent)}document.hasOwnProperty("_lyteMenu")||(document.documentElement.addEventListener("click",lyteCloseMenu,!0),document.documentElement.addEventListener("keydown",this.keydownCheck,!0),document.documentElement.addEventListener("keypress",menukeypress,!0),window.addEventListener("orientationchange",this.resizeFunc,!0),window.addEventListener("resize",this.resizeFunc,!0),document._lyteMenu={},document._lyteMenu.eventFlag=!0),this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node)},rtlfunc:function(t,e,i){if(this._dir){if(e)return"right"==t?i-e.left:i-e.right;if("left"==t)return"right"}return e?e[t]:"left"},actions:{mousemove:function(t,e){for(var i=t.target;i&&"BODY"!=i.tagName&&"LYTE-MENU-ITEM"!=i.tagName;)i=i.parentNode;if(i&&"LYTE-MENU-ITEM"==i.tagName){var o=e.querySelector(".lyteMenuSelection");if(o==i)return;o?(o.classList.remove("lyteMenuSelection"),i.classList.add("lyteMenuSelection")):o||i.classList.add("lyteMenuSelection")}}},arrayFrom:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e.slice()},appendFreeze:function(t){var e=document.createElement("div");return e.setAttribute("class",t),document.body.appendChild(e)},resizeFunc:function(t){t&&"resize"==t.type&&_lyteUiUtils.isMobile||(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){for(var e=document.getElementsByTagName("lyte-menu"),i=0;i<e.length;i++){var o=e[i],n=o.component;o.classList.contains("lyteMenuClosed")||(n.hasOwnProperty("parentMenu")||(n.callScrollFunc(t),n.getData("ltPropFreeze")&&!n.parentMenu&&setTimeout(n.setZIndex.bind(n),100)))}}.bind(this),t&&"orientationchange"==t.type?500:16))},keydownCheck:function(t){var e=t.which||t.keyCode;if(27==e)lyteCloseMenu(t,void 0,!0);else if(/^(38|40|13|36|35)$/.test(e))for(var i=document.getElementsByTagName("lyte-menu"),o=0;o<i.length;o++){if(!i[o].classList.contains("lyteMenuClosed")&&null!=i[o].getAttribute("lyte-rendered"))if(!(n=i[o].component).childMenu){n.traverseList.call(n,t),(/^(38|40)$/.test(e)||n.data.ltPropAria&&/^(35|36)$/.test(e))&&t.preventDefault();break}}else if(/^(37|39)$/.test(e))for(i=document.getElementsByTagName("lyte-menu"),o=0;o<i.length;o++){var n;if(!i[o].classList.contains("lyteMenuClosed")&&null!=i[o].getAttribute("lyte-rendered"))if((n=i[o].component).parentMenu&&!n.childMenu&&n.data.ltPropAria){$L(".lyteMenuSelection",n.childComp).length?((/right/i.test(n.data.pos)&&37==e||/left/i.test(n.data.pos)&&39==e)&&n.$node.ltProp("show",!1),t.preventDefault()):n.scrIntoView($L("lyte-menu-item:not(.lyteMenuSelection)",n.childComp).eq(0).addClass("lyteMenuSelection").get(0));break}}},searchFilter:function(t){if(this._typed="",t){for(var e=this.childComp.getElementsByTagName("lyte-menu-item"),i={},o=0;o<e.length;o++){var n=e[o].textContent.trim().toLowerCase().indexOf(t);-1!=n&&(n<i.index||void 0==i.index)&&(i.item=e[o],i.index=n)}if(i.item){var s=this.childComp.getElementsByClassName("lyteMenuSelection")[0];if(i.item==s)return;s&&s.classList.remove("lyteMenuSelection"),i.item.classList.add("lyteMenuSelection"),this.scrIntoView.call(this,i.item)}}},scrIntoView:function(t){t&&$L.fastdom.measure(function(){var e=t.getBoundingClientRect(),i=this.findscrElem.call(this,t),o=i.getBoundingClientRect();$L.fastdom.mutate(function(){e.bottom>o.bottom?i.scrollTop+=parseInt(e.bottom-o.bottom):e.top<o.top&&(i.scrollTop+=parseInt(e.top-o.top))}.bind(this))}.bind(this))},findscrElem:function(t){for(var e=t.parentNode;e&&"LYTE-MENU-BODY"!=e.nodeName;){var i=window.getComputedStyle(e).getPropertyValue("overflow-y");if(e.scrollHeight>e.offsetHeight&&("auto"==i||"scroll"==i))break;e=e.parentNode}return e},didDestroy:function(){if(this.childComp){for(var t=this.childComp.getElementsByTagName("lyte-menu-item"),e=0;e<t.length;e++){t[e].getAttribute("lyte-shortcut")&&t[e].setAttribute("lyte-shortcut",JSON.stringify({}))}this.childComp.parentElement&&this.childComp.parentElement.removeChild(this.childComp),delete this.childComp.parent,delete this.childComp}var i=this.getData("eventListeners"),o=this.getData("ltPropEvent");if(0==document.body.querySelectorAll("lyte-menu").length){var n=document.body.querySelectorAll("div.lytemenufreezelayer");for(e=0;e<n.length;e++)document.body.removeChild(n[e]);document._lyteMenu&&(delete document._lyteMenu,document.documentElement.removeEventListener("keydown",this.keydownCheck,!0),document.documentElement.removeEventListener("keypress",menukeypress,!0),document.documentElement.removeEventListener("click",lyteCloseMenu,!0),window.removeEventListener("resize",this.resizeFunc,!0),window.removeEventListener("orientationchange",this.resizeFunc,!0))}else this.data.ltPropShow&&this.data.ltPropFreeze&&(document.body.classList.remove("lyteBodyWrapper"),this.removeFreeze());window.removeEventListener("scroll",this.addScrollPos,!0);var s,l=this.getData("ltPropQuery"),r=this.getData("parIndex");if((l||void 0!=r)&&(l&&(s=document.querySelectorAll(l)),document.removeEventListener(/^(mouseenter|mousemove|mouseover|hover)$/.test(o)?"mousemove":o,i.event,!0),l))for(e=0;e<s.length;e++)delete s[e].menu;clearTimeout(this._typetime),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody),document.menu==this&&delete document.menu},closestFind:function(t,e){for(var i=this.getData("parIndex"),o=this.arrayFrom.call(this,void 0!=i?this.$node.parentNode.parentNode.querySelectorAll("lyte-menu-item:nth-of-type("+ ++i+")"):document.querySelectorAll(e.trim())),n=0;n<t.length;n++)if(-1!=Array.prototype.indexOf.call(o,t[n]))return t[n];return null},checkElementForMenu:function(t){if(!t.menuFlag){var e=this.getData("ltPropQuery"),i=this.closestFind.call(this,t.path?t.path:this.composePath.call(this,t),e);if(null!=i){if(this._evtadded)return void(this.data.ltPropAnimate&&0==parseInt(this.menuBody.style.height)&&this.setData("ltPropShow",!1));if("contextmenu"==t.type&&(t.preventDefault(),lyteCloseMenu(t,this.$node)),!this.childComp.classList.contains("lyteMenuHidden")&&this.$node.element!=i){this.childComp.classList.remove("lyteAnimate"),this._hideStarts=!0,this._closest=i,this._event=t;var o=new Promise(function(e,i){this._promResolve=e,this._promReject=i,this.hideMenu.call(this,!0,t)}.bind(this));return void Promise.resolve(o).then(function(){this.openingMenu(this._closest,this._event),delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this),function(){delete this._closest,delete this._event,delete this._promReject,delete this._promResolve}.bind(this))}this.openingMenu(i,t)}else"contextmenu"==t.type&&lyteCloseMenu(t,void 0,!0)}},openingMenu:function(t,e){"LYTE-MENU-ITEM"==t.tagName&&"click"==e.type&&e.stopPropagation(),e.menuFlag=!0,this.$node.element=t,t.menu=this.$node,this.parentMenu||("contextmenu"!=e.type?$L.fastdom.mutate(this.$node.toggle.bind(this.$node,e)):this.$node.toggle(e||{}))},didConnect:function(){var t=this.$node.getElementsByTagName("lyte-menu-box")[0];this.$node.toggle=function(t,e){this.childComp.classList.contains("lyteMenuHidden")||e?(["mousedown","mouseup"].indexOf(t.type)>-1&&(document._lyteMenu.preventClick=!1),this.openMenu.call(this,t)):this.childMenu||-1!=t.type.indexOf("mouse")||this._hideStarts||this.hideMenu.call(this,!0,t)}.bind(this),t.parent=this.$node,this.childComp=t,t.classList.add("lyteMenuHidden"),this.$node.classList.add("lyteMenuClosed"),t.style.width=this.getData("ltPropWidth"),this.data.ltPropCallout&&/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&this.childComp.classList.add("lyteHoverMenu"),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL()}.bind(this))},bToBody:function(){if(this.data.ltPropBindToBody&&this.childComp.parentNode!=document.body){var t=this.childComp.querySelector("lyte-menu-body");t.addEventListener("click",this.optionSelect.bind(this)),t.parent=this.$node,this.menuBody=t;var e=document.createElement("span");e.setAttribute("class","lyteArrow"+(this.data.ltPropCallout?"":" lyteMenuHidden")),t.insertBefore(e,t.children[0]),this.menuBody.style.height=this.data.ltPropHeight,this._dir&&this.menuBody.classList.add("lyteRTL"),_lyteUiUtils.appendChild(document.body,this.childComp)}else this.data.ltPropBindToBody||(this.$node.ltProp("show",!1),this.menuBody&&(delete this.menuBody.parent,delete this.menuBody))}.observes("ltPropBindToBody").on("didConnect"),calloutObs:function(t){var e=this.childComp.querySelector("span.lyteArrow");t.newValue?e.classList.remove("lyteMenuHidden"):e.classList.add("lyteMenuHidden")}.observes("ltPropCallout"),data:function(){return{ltPropContent:Lyte.attr("array",{default:[]}),ltPropId:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropQuery:Lyte.attr("string",{default:""}),ltPropEvent:Lyte.attr("string",{default:"click"}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropUserValue:Lyte.attr("string",{default:""}),ltPropSystemValue:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:!1}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropDescription:Lyte.attr("string",{default:""}),ltPropTabIndex:Lyte.attr("number",{default:0}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropWidth:Lyte.attr("string",{default:"auto"}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropQueryClass:Lyte.attr("string",{default:"lyteMenuSelected"}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropScope:Lyte.attr("string",{default:""}),ltPropPreventInsideClick:Lyte.attr("boolean",{default:!1}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropSetCss:Lyte.attr("boolean",{default:!0}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropWrapperId:Lyte.attr("string",{default:""}),ltPropBindToBody:Lyte.attr("boolean",{default:!0}),ltPropAria:Lyte.attr("boolean",{default:!1}),ltPropAriaAttributes:Lyte.attr("object",{default:{role:"menu"}}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropHeightResetOnScroll:Lyte.attr("boolean",{default:!0}),eventListeners:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),parIndex:Lyte.attr("number"),lyteUnbound:Lyte.attr("boolean",{default:!1})}},firePosCallBack:function(){this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",this.getData("pos"),this.$node)}.observes("pos"),contentChangeObs:function(){this.contentChange.call(this)}.observes("ltPropContent.[]"),contentChange:function(){this.childComp.classList.contains("lyteMenuHidden")||(this.setCss.call(this),this.menuBody.style.removeProperty("height"))},setContextCss:function(t,e){var i=this.$node.element,o=this.childComp;$L.fastdom.measure(function(){var n=t,s=i.getBoundingClientRect();t||(t={clientX:s.left+s.width/2,clientY:s.top+s.height/2});var l=o.getBoundingClientRect(),r=this.menuBody.getBoundingClientRect(),a=window.getComputedStyle(this.menuBody),h="content-box"==a.boxSizing?parseFloat(a.paddingTop)+parseFloat(a.paddingBottom):0,d=r.height-h,p=window.innerHeight,u=window.innerWidth,m=this.data.ltPropOffset||{},c=m.top||0,y=m.bottom||0,f=m.left||0,g=m.right||0,v=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),C=window.pageYOffset||document.documentElement.scrollTop,w=this.rtlfunc.call(this,"left"),L=void 0!=this.__cX?this.__cX+this.rtlfunc("left",s,u):this._dir?u-t.clientX:t.clientX,M=void 0!=this.__cY?this.__cY+s.top:t.clientY;switch(e||(e=this.data.ltPropPosition),e){case"up":o.style[w]=L+v+"px",o.style.top=M>p-M?M+C+"px":M-l.height+C+"px",this.setData("pos","up");break;default:o.style[w]=L+v+"px",o.style.top=M<p-M?M+C+"px":M-l.height+C+"px",this.setData("pos","down")}l.left<f?o.style[w]=L+f+"px":this.rtlfunc.call(this,"right",l,u)>u-g&&(o.style[w]=L-l.width+"px"),n&&(parseFloat(o.style.top)-C+d>p-y&&M<=p&&(this.menuBody.style.height=p-y-parseFloat(o.style.top)+C+"px",d=parseFloat(this.menuBody.style.height)),parseFloat(o.style.top)-C<c&&M>=c&&(this.menuBody.style.height=parseFloat(o.style.top)-C-c+d+"px",o.style.top=C+c+"px",d=parseFloat(this.menuBody.style.height)),this._hgt=d,void 0==this.__cX&&(this.__cX=L-this.rtlfunc("left",s,u)),void 0==this.__cY&&(this.__cY=M-s.top))}.bind(this))},openMenu:function(t,e){var i,o,n=this.getData("ltPropEvent");if(t=t||{},e||(o=this.targetElem.call(this,t.target))[0]&&(o[0].originMenu=o[1].component),e&&"contextmenu"!=n){if(!this.$node.element){var s=this.getData("ltPropQuery");this.$node.element=document.body.querySelector(s.trim())}"LYTE-MENU-ITEM"==this.$node.element.tagName?o=this.targetElem.call(this,this.$node.element):o||(o=[])}this.getMethods("onBeforeOpen")&&(i=this.executeMethod("onBeforeOpen",this.$node,t,this.$node.element)),0!=i?(this.data.ltPropBindToBody||this.$node.ltProp("bindToBody",!0),this.childComp.scrollTop=0,this.childComp.classList.remove("lyteMenuHidden"),this.$node.classList.remove("lyteMenuClosed"),this.$node.element&&this.$node.element.setAttribute("aria-expanded","true"),this.childComp.style.display="block",this.getData("ltPropHeight")?this.menuBody.style.height=this.getData("ltPropHeight"):this.menuBody.style.removeProperty("height"),o[0]&&"LYTE-MENU"==o[1].tagName&&(o[1].component.childMenu=this,this.parentMenu=o[1].component,o[1].component.childComp.addEventListener("mousemove",this.mouseleave)),this.parentMenu||this.$node.element.classList.add(this.getData("ltPropQueryClass")),this.parentMenu||"LYTE-MENU-ITEM"==this.$node.element.tagName||lyteCloseMenu(t,this.$node),this.getData("ltPropFreeze")&&!this.parentMenu?this.setZIndex.call(this):document.menu||(window.addEventListener("scroll",this.addScrollPos,!0),document.menu=this),!/^(mouseenter|mousemove|mouseover|hover)$/.test(n)||this.childMenu||this.parentMenu||o[0]||(document.addEventListener("mousemove",this._hoverclose),this.$node.element.addEventListener("mousemove",this.preventEvent),this.menuBody.addEventListener("mousemove",this.preventEvent)),$L.fastdom.measure(function(){this.menuBody.getBoundingClientRect(),window.innerHeight,window.pageYOffset||document.documentElement.scrollTop;this._dontCall=!0,this.$node.ltProp("show",!0),delete this._dontCall,"contextmenu"==this.getData("ltPropEvent")?this.setContextCss.call(this,t):this.setCss.call(this),"contextmenu"!=t.type&&this.getData("ltPropAnimate")&&0!=this._hgt&&(this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),setTimeout(this.animeClassAdd.bind(this),20)),this.getMethods("onOpen")&&this.executeMethod("onOpen",this.$node,t,this.$node.element)}.bind(this))):(this._dontCall=!0,delete this.$node.element,this.setData("ltPropShow",!1),delete this._dontCall,this._promReject&&this._promReject())},animeClassAdd:function(){this.childComp.classList.add("lyteAnimate"),setTimeout(this.heightSet.bind(this),20)},heightSet:function(){this._evtadded=!0,this.childComp.addEventListener("transitionend",this._trsend),-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)-this._hgt+"px"),this.menuBody.style.height=this._hgt+"px"},tranEnd:function(t){this.childComp.removeEventListener("transitionend",this._trsend),this.childComp.classList.remove("lyteAnimate")},composePath:function(t){for(var e=[],i=t.target;i&&"HTML"!=i.tagName;)e.push(i),i=i.parentNode;return e},elementsFromPointCal:function(t,e){for(var i=[],o=document.elementFromPoint(t,e);o!=document&&o!=document.documentElement&&o!=document.body&&"LYTE-MENU-BODY"!=o.tagName&&(o._pe=o.style.pointerEvents,o.style.pointerEvents="none",i.push(o),o!=(o=document.elementFromPoint(t,e))););for(var n=0;n<i.length;n++)i[n].style.pointerEvents=i[n]._pe,delete i[n]._pe;return i},hoverClose:function(t){this.$node&&-1==(document.elementsFromPoint?document.elementsFromPoint(t.clientX,t.clientY):this.elementsFromPointCal.call(this,t.clientX,t.clientY)).indexOf(this.$node.element)&&this.hideMenu.call(this,!0,t)},mouseleave:function(t){var e=this.parent.component,i=e.targetElem.call(e,t.target);e.childMenu&&i[1]==e.$node&&i[0]!=e.childMenu.$node.element&&i[0]&&(this.removeEventListener("mousemove",e.childMenu.mouseleave),e.childMenu.hideMenu.call(e.childMenu,!0,t))},hideToggle:function(t){this._dontCall||(0==t.newValue?this.hideMenu.call(this,!0,{}):this.openMenu.call(this,{},!0))}.observes("ltPropShow"),hideMenu:function(t,e,i){var o;if(this.childMenu){if(this.childMenu.childComp.contains(e.target)&&!i)return;if(!this.childMenu.hideMenu.call(this.childMenu,t,e,i))return}if(this.getMethods("onBeforeClose")&&(o=this.executeMethod("onBeforeClose",this.$node,e)),0!=o)return delete this.__cX,delete this.__cY,this.parentMenu?(delete this.parentMenu.childMenu,delete this.parentMenu):(this.$node.element.classList.remove(this.getData("ltPropQueryClass")),delete document.menu,window.removeEventListener("scroll",this.addScrollPos,!0)),this._arguments=arguments,-1!=/^(mouseenter|mousemove|mouseover|hover)$/.test(this.data.ltPropEvent)&&(this.$node.element.removeEventListener("mousemove",this.preventEvent),this.menuBody.removeEventListener("mousemove",this.preventEvent),document.removeEventListener("mousemove",this._hoverclose)),$L.fastdom.mutate(function(){this.menuBody&&this.data.ltPropAnimate&&"contextmenu"!=this.data.ltPropEvent?(this.menuBody.style.height=this._hgt+"px",this.childComp.classList.add("lyteAnimate"),setTimeout(function(){this.menuBody.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(this.childComp.style.top=parseInt(this.childComp.style.top)+this._hgt+"px"),this.menuBody.removeEventListener("transitionend",this._close),this.menuBody.addEventListener("transitionend",this._close)}.bind(this),20)):(delete this._arguments,this.closing(t,e))}.bind(this)),!0;this._dontCall=!0,this.setData("ltPropShow",!0),delete this._dontCall,delete this._hideStarts,this._promReject&&this._promReject()},closing:function(){var t,e;this._arguments?(t=this._arguments[0],e=this._arguments[1],this.menuBody.style.height=this._hgt+"px",delete this._hgt,delete this._arguments):(t=arguments[0],e=arguments[1]),this.menuBody&&this.menuBody.removeEventListener("transitionend",this._close),this.childComp.classList.add("lyteMenuHidden"),delete this._hideStarts,this.$node.classList.add("lyteMenuClosed"),this.getData("ltPropFreeze")&&!this.parentMenu&&this.setZIndex.call(this,t),this._dontCall=!0,this.$node.ltProp("show",!1),this.$node.element&&this.$node.element.removeAttribute("aria-expanded"),delete this._dontCall,delete this.$node.element,delete this._evtadded,this.childComp.classList.remove("lyteAnimate"),this.childComp.style.left="",this.childComp.style.top="";var i=this.childComp.querySelector(".lyteMenuSelection");i&&i.classList.remove("lyteMenuSelection"),$L.fastdom.measure(function(){this.getMethods("onClose")&&this.executeMethod("onClose",this.$node,e),this._promResolve&&$L.fastdom.mutate(this._promResolve.bind(this))}.bind(this))},targetElem:function(t){var e;for(t=t.correspondingElement||t;t&&"LYTE-MENU-BODY"!=t.tagName&&"BODY"!=t.tagName;)"LYTE-MENU-ITEM"==t.tagName&&(e=t),t=t.parentNode;return[e,t?t.parent:null]},optionSelect:function(t){var e,i=this.targetElem.call(this,t.target)[0];if((1==t.ctrlKey||1==t.metaKey||2==t.which)&&void 0!=t.target.href&&-1!=t.target.href.indexOf("javascript:")&&"_blank"==t.target.target)return!1;if(this.getMethods("onMenuClick")&&i){var o;if(this.getData("ltPropYield"))o=i.getAttribute("data-value");else{var n=this.getData("ltPropContent");if(i.hasAttribute("grporder")){var s=n[parseInt(i.getAttribute("grporder"))];o=s[Object.keys(s)[0]][parseInt(i.getAttribute("elemorder"))]}else o=n[parseInt(i.getAttribute("elemorder"))]}e=this.executeMethod("onMenuClick",o,t,this.$node,this.$node.element,{element:i,submenu:!!i.originMenu})}this.childMenu&&!e&&t.stopPropagation(),(i||!i&&this.getData("ltPropPreventInsideClick"))&&lyteCloseMenu(t,void 0,!0)},setLeftExceedForDown:function(t,e,i,o,n,s){var l=i;return n+this.rtlfunc.call(this,"left",l,s)+l.width-o.width},setLeftNotExceedForDown:function(t,e,i,o){var n=e;return i+this.rtlfunc.call(this,"left",n,o)},setTopAboveForDown:function(t,e,i,o,n){return n+i.top-o.height},setTopBelowForDown:function(t,e,i){var o=e;return i+o.top+o.height},setLeftForRight:function(t,e,i,o){var n=e;return i+this.rtlfunc.call(this,"left",n,o)+n.width},setRightForRight:function(t,e,i,o,n,s){var l=i,r=o;return n+this.rtlfunc.call(this,"left",l,s)-r.width},setTopForRight:function(t,e,i){return i+e.top},setTopForRightAbove:function(t,e,i,o,n){var s=i;return n+s.top+s.height-o.height},setCorrectClass:function(t){for(var e=this.childComp.querySelector(".lyteArrow"),i=e.classList,o=0;o<i.length;o++)"lyteArrow"!=i[o]&&i[o]!=t&&(e.classList.remove(i[o]),o--);e.classList.add(t)},setCss:function(t){var e=this.childComp;if(e&&!e.classList.contains("lyteMenuHidden")&&this.getData("ltPropSetCss")){var i,o,n,s=this.getData("ltPropCallout"),l=e,r=this.$node.element,a=window.innerWidth,h=this.getData("ltPropScope");if(h){var d={target:r},p=this.closestFind.call(this,this.composePath.call(this,d),h);if(p){var u=p.getBoundingClientRect();o=this.rtlfunc.call(this,"left",u,a)<0?0:this.rtlfunc.call(this,"left",u,a),i=a>this.rtlfunc.call(this,"right",u,a)?this.rtlfunc.call(this,"right",u,a):a,n=!0}}n||(i=a,o=0);var m,c,y,f,g=window.innerHeight,v=0,C=l.getBoundingClientRect(),w=this.menuBody.getBoundingClientRect(),L=window.getComputedStyle(this.menuBody),M="content-box"==L.boxSizing?parseFloat(L.paddingTop)+parseFloat(L.borderTopWidth)+parseFloat(L.borderBottomWidth)+parseFloat(L.paddingBottom):0,P=w.height-M,x=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),b=window.pageYOffset||document.documentElement.scrollTop,E=l.offsetHeight,_=l.offsetWidth,B=e.querySelector(".lyteArrow"),A=this.getData("ltPropPosition"),F=r.getBoundingClientRect(),S=B?B.getBoundingClientRect():{width:0,height:0},$=S.height/2,D=S.width/2,T=this.data.ltPropOffset||{};T.left&&(o+=T.left),T.top&&(v+=T.top),T.right&&(i-=T.right),T.bottom&&(g-=T.bottom);var R,N,k,O,z,H,I=this.rtlfunc.call(this,"left",F,a),U=this.rtlfunc.call(this,"left");if(B&&(B.style.removeProperty("left"),B.style.removeProperty("top"),B.style.removeProperty("bottom"),B.style.removeProperty("right")),"down"===A)m=!0,(N=F.top+F.height)+E>g&&(m=g-F.top>F.bottom-v),c=!0,(k=I)+_>i&&k>k+F.width-l.offsetWidth?c=!1:I+_<=i&&(c=!0),F.width>_&&(B.style[U]=(_/2-0)/_*100+"%"),m?(z="down",s?(this.setCorrectClass("lyteArrowTop"),R=this.setTopBelowForDown(r,F,b)+$+"px"):l.style.top=this.setTopBelowForDown(r,F,b)+"px"):(z="up",s?(this.setCorrectClass("lyteArrowBottom"),R=this.setTopAboveForDown(r,l,F,C,b)-$+"px"):l.style.top=this.setTopAboveForDown(r,l,F,C,b)+"px"),c?(s&&(H=Math.max(F.width/2-D,D/2)/(O=_/100),B.style[U]=H+"%"),l.style.top=R||l.style.top,l.style[U]=this.setLeftNotExceedForDown(r,F,x,a)+"px"):(s&&(O=_/100,H=(_-F.width/2-D)/O,B.style[U]=H+"%"),l.style.top=R||l.style.top,l.style[U]=this.setLeftExceedForDown(r,l,F,C,x,a)+"px");else if("right"===A)c=!0,c=!(I+F.width+_>i&&I-C.width>o),m=!0,F.top+C.height>g&&(m=g-F.top>F.bottom-v),c?(z="right",s?(this.setCorrectClass("lyteArrowLeft"),R=this.setLeftForRight(r,F,x,a)+D+"px"):l.style[U]=this.setLeftForRight(r,F,x,a)+"px"):(z="left",s?(this.setCorrectClass("lyteArrowRight"),R=this.setRightForRight(r,l,F,C,x,a)-D+"px"):l.style[U]=this.setRightForRight(r,l,F,C,x,a)+"px"),m?(s&&(B.style.top=Math.max(F.height/2-$,$/2)+"px"),l.style[U]=R||l.style[U],l.style.top=this.setTopForRight(r,F,b,a)+"px"):(s&&(B.style.bottom=Math.max(F.height/2-$,$/2)+"px"),l.style[U]=R||l.style[U],l.style.top=this.setTopForRightAbove(r,l,F,C,b,a)+"px");else if("up"===A)y=!0,F.top-C.height<v&&(y=g-F.top<F.bottom-v),c=!0,I+_>i&&I>I+F.width-l.offsetWidth?c=!1:I+_<=i&&(c=!0),F.width>_&&B&&(B.style[U]=(_/2-0)/_*100+"%"),y?(z="up",s?(this.setCorrectClass("lyteArrowBottom"),R=this.setTopAboveForDown(r,l,F,C,b)-$+"px"):l.style.top=this.setTopAboveForDown(r,l,F,C,b)+"px"):(z="down",s?(this.setCorrectClass("lyteArrowTop"),R=this.setTopBelowForDown(r,F,b)+$+"px"):l.style.top=this.setTopBelowForDown(r,F,b,a)+"px"),c?(s&&(H=Math.max(F.width/2-D,D/2)/(O=_/100),B.style[U]=H+"%"),l.style.top=R||l.style.top,l.style[U]=this.setLeftNotExceedForDown(r,F,x,a)+"px"):(s&&(O=_/100,H=(_-F.width/2-D)/O,B.style[U]=H+"%"),l.style.top=R||l.style.top,l.style[U]=this.setLeftExceedForDown(r,l,F,C,x,a)+"px");else if("left"===A)f=!0,f=!(I-C.width<o&&I+C.width<i),m=!0,F.top+C.height>g&&(m=g-F.top>F.bottom-v),f?(z="left",s?(this.setCorrectClass("lyteArrowRight"),R=this.setRightForRight(r,l,F,C,x,a)-D+"px"):l.style[U]=this.setRightForRight(r,l,F,C,x,a)+"px"):(z="right",s?(this.setCorrectClass("lyteArrowLeft"),R=this.setLeftForRight(r,F,x,a)+D+"px"):l.style[U]=this.setLeftForRight(r,F,x)+"px"),m?(s&&(B.style.top=Math.max(F.height/2-$,$/2)+"px"),l.style[U]=R||l.style[U],l.style.top=this.setTopForRight(r,F,b)+"px"):(s&&(B.style.bottom=Math.max(F.height/2-$,$/2)+"px"),l.style[U]=R||l.style[U],l.style.top=this.setTopForRightAbove(r,l,F,C,b)+"px");else if("downLeft"===A){if(m=!0,(N=F.top+F.height)+E>g&&(m=g-F.top>F.bottom-v),m||(N=F.top-E),c=!1,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.max(I+F.width/2-_,I-_+2*$))<o?(k=o,c=!0):c=!1,l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?I+.25*F.width-k+"px":Math.min(_-.25*F.width,_-1.5*$-3)+"px",B.style[U]=Y;z=m?"downLeft":"upLeft"}else if("downRight"===A){if(m=!0,(N=F.top+F.height)+E>g&&(m=g-F.top>F.bottom-v),m||(N=F.top-E),c=!0,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.min(I+F.width/2,I+F.width-2*$))+_>i?(k=i-_,c=!1):c=!0,l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?Math.max(.25*F.width,D/2)+"px":I+.25*F.width-k+"px",B.style[U]=Y;z=m?"downRight":"upRight"}else if("upLeft"===A){if(m=!1,(N=F.top-E)<v&&(m=g-F.top>F.bottom-v),m&&(N=F.top+F.height),c=!1,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.max(I+F.width/2-_,I-_+2*$))<o?(k=o,c=!0):c=!1,l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?I+.25*F.width-k+"px":Math.min(_-.25*F.width,_-1.5*$-3)+"px",B.style[U]=Y;z=m?"downLeft":"upLeft"}else if("upRight"===A){if(m=!1,(N=F.top-E)<v&&(m=g-F.top>F.bottom-v),m&&(N=F.top+F.height),c=!0,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.min(I+F.width/2,I+F.width-2*$))+_>i?(k=i-_,c=!1):c=!0,l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?Math.max(.25*F.width,D/2)+"px":I+.25*F.width-k+"px",B.style[U]=Y;z=m?"downRight":"upRight"}else if("downAlignLeft"===A){if(m=!0,(N=F.top+F.height)+E>g&&(m=g-F.top>F.bottom-v),m||(N=F.top-E),c=!1,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.max(I+F.width-_,I-_+2*$))<o?(k=Math.max(Math.min(I,I+F.width-2*$),o),c=!0):(k=Math.min(i-_,k),c=!1),l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?(F.right-k)/2+"px":Math.min((I-k+_)/2,_-1.5*$-3)+"px",B.style[U]=Y;z=m?"downAlignLeft":"upAlignLeft"}else if("downAlignRight"===A){if(m=!0,(N=F.top+F.height)+E>g&&(m=g-F.top>F.bottom-v),m||(N=F.top-E),c=!0,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.min(I,I+F.width-2*$))+_>i?(k=Math.min(Math.max(I+F.width-_,I-_+2*$),i-_),c=!1):(k=Math.max(k,0),c=!0),l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?Math.max(.5*(this.rtlfunc.call(this,"right",F,a)-k-D),D/2)+"px":.5*(-k+_+I)+"px",B.style[U]=Y;z=m?"downAlignRight":"upAlignRight"}else if("upAlignLeft"===A){if(m=!1,(N=F.top-E)<v&&(m=g-F.top>F.bottom-v),m&&(N=F.top+F.height),c=!1,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.max(I+F.width-_,I-_+2*$))<o?(k=Math.max(Math.min(I,I+F.width-2*$),o),c=!0):(k=Math.min(i-_,k),c=!1),l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?(F.right-k)/2+"px":Math.min((I-k+_)/2,_-1.5*$-3)+"px",B.style[U]=Y;z=m?"downAlignLeft":"upAlignLeft"}else if("upAlignRight"===A){var Y;if(m=!1,(N=F.top-E)<v&&(m=g-F.top>F.bottom-v),m&&(N=F.top+F.height),c=!0,s&&this.setCorrectClass(m?"lyteArrowTop":"lyteArrowBottom"),(k=Math.min(I,I+F.width-2*$))+_>i?(k=Math.min(Math.max(I+F.width-_,I-_+2*$),i-_),c=!1):(k=Math.max(k,o),c=!0),l.style.top=N+$*(m?1:-1)+b+"px",l.style[U]=k+x+"px",s)Y=c?Math.max(.5*(this.rtlfunc.call(this,"right",F,a)-k-D),D/2)+"px":.5*(-k+_+I)+"px",B.style[U]=Y;z=m?"downAlignRight":"upAlignRight"}parseFloat(l.style.top)-b+P>g&&F.top<=g&&(this.menuBody.style.height=g-parseFloat(l.style.top)+b-M+"px",P=parseFloat(this.menuBody.style.height)),parseFloat(l.style.top)-b<v&&F.bottom>=v&&(this.menuBody.style.height=parseFloat(l.style.top)+P-v+"px",l.style.top=v+"px",P=parseFloat(this.menuBody.style.height)),this._hgt=P,l.classList.contains("lyteHoverMenu")&&($L(l).removeClass("topPlace","bottomPlace","rightPlace","leftPlace"),/up/.test(z)?l.classList.add("topPlace"):/down/.test(z)?l.classList.add("bottomPlace"):/right/.test(z)?l.classList.add("rightPlace"):/left/.test(z)&&l.classList.add("leftPlace")),m?$L(this.childComp).removeClass("lyteMenuUp").addClass("lyteMenuDown"):$L(this.childComp).removeClass("lyteMenuDown").addClass("lyteMenuUp"),this.setData("pos",z)}},checkForBoundary:function(t,e){var i=this.getData("ltPropBoundary");(i.hasOwnProperty("left")&&this.rtlfunc.call(this,"left",t,e)<this.rtlfunc.call(this,"left",i,e)||i.hasOwnProperty("right")&&this.rtlfunc.call(this,"right",t,e)>this.rtlfunc.call(this,"right",i,e)||i.hasOwnProperty("top")&&t.top<i.top||i.hasOwnProperty("bottom")&&t.bottom>i.bottom)&&this.hideMenu.call(this)},traverseList:function(t){var e=t.keyCode||t.which;if(!(this.childComp&&this.childComp.classList.contains("lyteMenuHidden")||13!=e&&40!=e&&38!=e&&36!=e&&35!=e)){var i=this.childComp.querySelector(".lyteMenuSelection");if(!i||!i.offsetParent)if(35!=e){var o=this.childComp.querySelector("lyte-menu-item:not(.lyteSearchHidden)");if(o&&o.offsetParent)return void o.classList.add("lyteMenuSelection")}else $L("lyte-menu-item:not(.lyteSearchHidden)",this.childComp).eq(-1).addClass("lyteMenuSelection");for(var n=this.childComp.querySelectorAll("lyte-menu-item:not(.lyteSearchHidden)"),s=0;s<n.length&&(!n[s].offsetParent||!n[s].classList.contains("lyteMenuSelection"));s++);if(13==e)n[s].dispatchEvent(new Event("click",{bubbles:!0})),t.preventDefault();else if(38==e&&0!=s){var l=s;for(s-=1;s>-1&&(n[s].classList.contains("lyteMenuActive")||n[s].classList.contains("lyteMenuFiltered")||!n[s].offsetParent);s--);-1!=s&&(n[l].classList.remove("lyteMenuSelection"),n[s].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,n[s]))}else if(40==e&&s!=n.length-1){l=s;for(s+=1;s<n.length&&(n[s].classList.contains("lyteMenuActive")||n[s].classList.contains("lyteMenuFiltered")||!n[s].offsetParent);s++);s!=n.length&&(n[l].classList.remove("lyteMenuSelection"),n[s].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,n[s]))}else if(36==e&&n.length&&this.data.ltPropAria){if(i==n[0])return;i.classList.remove("lyteMenuSelection"),n[0].classList.add("lyteMenuSelection"),this.scrIntoView.call(this,n[0])}else if(35==e&&n.length&&this.data.ltPropAria){if(i==$L(n).get(-1))return;i.classList.remove("lyteMenuSelection"),$L(n).get(-1).classList.add("lyteMenuSelection"),this.scrIntoView.call(this,$L(n).get(-1))}}},setFreeze:function(t){var e=document.body.querySelectorAll(".lytemenufreezelayer:not(.nogroup)");$L.fastdom.measure(function(){var i=document.body.querySelector(".lytemenufreezelayer.left"),o=t.getBoundingClientRect(),n=window.innerWidth;$L.fastdom.mutate(function(){i.style.height=o.height+"px",i.style.width=Math.max(o.left,0)+"px",i.style.top=o.top+"px",(i=document.body.querySelector(".lytemenufreezelayer.right")).style.height=o.height+"px",i.style.width=Math.max(n-o.right,0)+"px",i.style.top=o.top+"px",(i=document.body.querySelector(".lytemenufreezelayer.top")).style.height=o.top+"px",(i=document.body.querySelector(".lytemenufreezelayer.bottom")).style.height=window.innerHeight-o.bottom+"px";for(var t=0;t<e.length;t++)e[t].classList.remove("lyteMenuHidden"),e[t].addEventListener("wheel",this.preventEvent),e[t].addEventListener("touchmove",this.preventEvent)}.bind(this))}.bind(this))},preventEvent:function(t){if(!(t.metaKey||t.shiftKey||t.ctrlKey)){var e="touchmove"==t.type;if(e&&1!=t.touches.length)return;("wheel"==t.type||e)&&t.stopImmediatePropagation(),t.preventDefault(),t.stopPropagation()}},addScrollPos:function(t){document.menu&&(t.target!=window&&document.menu.childComp.contains(t.target)||document.menu.callScrollFunc(t,!0))},removeFreeze:function(){if(!document.menu||this.data.ltPropAnimate&&this.data.ltPropFreeze){for(var t=document.body.querySelectorAll(".lytemenufreezelayer"),e=0;e<t.length;e++)t[e].classList.add("lyteMenuHidden"),t[e].removeEventListener("wheel",this.preventEvent);document.body.classList.remove("lyteBodyWrapper")}},setZIndex:function(t){var e=this.$node.element;if(e){for(;e&&"HTML"!=e.tagName;){if(e.classList.contains("lyteMenuGroup")){t?this.removeFreeze.call(this):(this.setFreeze.call(this,e),document.body.classList.add("lyteBodyWrapper"));break}e=e.parentNode}if(e&&"HTML"==e.tagName||!e)if(t&&!document.menu)this.removeFreeze.call(this);else document.body.querySelector(".lytemenufreezelayer.nogroup").classList.remove("lyteMenuHidden"),document.body.classList.add("lyteBodyWrapper")}},ariaObs:function(t){this.data.ltPropAria&&_lyteUiUtils.setAttribute(this.childComp,this.data.ltPropAriaAttributes||{},t?t.oldValue:{})}.observes("ltPropAriaAttributes","ltPropAriaAttributes.{}").on("didConnect"),callScrollFunc:function(t,e){var i=this.menuBody,o=-1!=i.style.height.indexOf("px"),n=Object.keys(this.data.ltPropBoundary||{}).length,s=e&&n&&this.$node.element?this.$node.element.getBoundingClientRect():void 0,l=e&&n&&this.$node.element?window.innerWidth:void 0,r=this.$node.ltProp("height"),a=this.data.ltPropHeightResetOnScroll,h="contextmenu"==this.$node.ltProp("event");o&&a?(i.style.height=r||"",e&&n&&$L.fastdom.measure(this.checkForBoundary.bind(this,s,l)),$L.fastdom.measure(this[h?"setContextCss":"setCss"].bind(this,t))):(this[h?"setContextCss":"setCss"](t),e&&n&&this.checkForBoundary(s,l)),this.childMenu&&this.childMenu.callScrollFunc()}});var lyteCloseMenu=function(t,e,i){if((0!=document._lyteMenu.preventClick||e)&&(t&&2!=t.button||e||i))for(var o=document.body.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),n=0;n<o.length;n++){if(o[n]!=e&&!o[n].component.childComp.classList.contains("lyteMenuHidden"))if(i||!o[n].component.childComp.contains(t.target))if(!o[n].component._hideStarts)o[n].component.hideMenu.call(o[n].component,!e,t,i)&&(o[n].component._hideStarts=!0)}t&&"click"==t.type&&(document._lyteMenu.preventClick=!0)};if(!_lyteUiUtils.registeredCustomElements["lyte-menu-item"]){function menukeypress(t){for(var e=document.querySelectorAll("lyte-menu:not(.lyteMenuClosed)[lyte-rendered]"),i=0;i<e.length;i++){var o=e[i].component;if(!o.childMenu){o._typed=o._typed||"",o._typed+=String.fromCharCode(t.which||t.keyCode),clearTimeout(o._typetime),o._typetime=setTimeout(o.searchFilter.bind(o,o._typed.trim().toLowerCase()),400);break}}}_lyteUiUtils.registeredCustomElements["lyte-menu-item"]=!0,Lyte.createCustomElement("lyte-menu-item",{static:{observedAttributes:{get:function(){return["lyte-shortcut"]}}},attributeChangedCallback:function(t,e,i){if("function"==typeof shortcut){var o=(i=JSON.parse(i)).key,n=i.type,s=i.wait;e=e?JSON.parse(e):{},shortcut.push({newKey:o,type:n,wait:s,oldKey:e.key,value:this})}},connectedCallback:function(){var t=$L(this).closest("lyte-menu-box").get(0);t&&t.parent&&(t.parent.ltProp("aria")&&$L(this).attr("role","menuitem"))}})}