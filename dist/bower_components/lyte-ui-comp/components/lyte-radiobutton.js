Lyte.Component.register("lyte-radiobutton",{_template:'<template tag-name="lyte-radiobutton">\n\t<template is="switch" value="{{ltPropType}}"><template case="default"></template><template case="primary"></template><template case="secondary">\n\t\t\t<label class="{{radioclass}}" onmouseup="{{action(\'mup\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" class="lyteHide" onclick="{{action(\'valueChanged\',event)}}" disabled="{{ltPropDisabled}}" checked="{{ltPropChecked}}">\n\t\t\t\t<span class="{{ltPropClass}}">\n\t\t\t\t\t<span class="lyteRadioCheck">\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="{{ltPropLabelClass}}">\n\t\t\t\t\t<template is="if" value="{{ltPropYield}}"><template case="true">\n\t\t\t\t\t\t<lyte-yield yield-name="yield"></lyte-yield>\n\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t</template></template>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t</template><template case="switch">\n\t\t\t<label class="" onmouseup="{{action(\'mup\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'valueChanged\',event)}}">\n\t\t\t\t<span class="{{ltPropClass}}">\n\t\t\t\t\t<span class="on-btn"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="{{ltPropLabelClass}}">\n\t\t\t\t\t<template is="if" value="{{ltPropYield}}"><template case="true">\n\t\t\t\t\t\t<lyte-yield yield-name="yield"></lyte-yield>\n\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t</template></template>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t</template><template case="slider">\n\t\t\t<label class="lyteRadioSliderLabel" onmouseup="{{action(\'mup\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="radio" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'valueChanged\',event)}}">\n\t\t\t\t<span class="{{ltPropClass}}">\n\t\t\t\t\t<span class="{{ltPropLabelClass}}">\n\t\t\t\t\t\t<template is="if" value="{{ltPropYield}}"><template case="true">\n\t\t\t\t\t\t\t<lyte-yield yield-name="yield"></lyte-yield>\n\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t\t</template></template>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t\n\t\t\t</label>\n\t\t</template></template>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[],additional:{next:"primary"}},primary:{dynamicNodes:[],additional:{next:"secondary"}},secondary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"attr",position:[1,5,1]},{type:"if",position:[1,5,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"attr",position:[1,3,1,1]},{type:"if",position:[1,3,1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}}],_observedAttributes:["ltPropType","ltPropName","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropValue","ltPropFireOnInit","ltPropLabelClass","ltPropClass","ltPropYield"],data:function(){return{ltPropType:Lyte.attr("string",{default:"default"}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropFireOnInit:Lyte.attr("boolean",{default:!1}),ltPropLabelClass:Lyte.attr("string",{default:""}),ltPropClass:Lyte.attr("string",{default:""}),ltPropYield:Lyte.attr("boolean",{default:!1})}},didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},changeStyle:function(){this.changeStyleFunction()}.observes("ltPropType"),changeStyleFunction:function(){var t=this.getData("ltPropType"),e=(this.getData("ltPropChecked"),this.getData("ltPropClass")),a=this.getData("ltPropLabelClass");-1===t.indexOf("slider")&&-1===t.indexOf("switch")&&-1===t.indexOf("default")&&-1===t.indexOf("primary")&&-1===t.indexOf("secondary")&&this.setData("ltPropType","default"),-1!==t.indexOf("default")?(this.setData("radioclass","lyteRadioBtn lyteDefault"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("primary")?(this.setData("radioclass","lyteRadioBtn lytePrimary"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("secondary")?(this.setData("radioclass","lyteRadioBtn lyteSecondary"),this.setData("ltPropClass",e||"lyteRadioLayer"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("switch")?(this.setData("ltPropClass",e||"lyteRadioSwitch"),this.setData("ltPropLabelClass",a||"lyteRadioLabel")):-1!==t.indexOf("slider")&&(this.setData("ltPropClass",e||"lyteRadioSlider"),this.setData("ltPropLabelClass",a||"lyteRadioSliderText"))},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.classList.add("lyteRadioDisabled"):this.$node.classList.remove("lyteRadioDisabled")},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),init:function(){this.reduceOpacity(),this.changeStyleFunction()},didConnect:function(){var t=this;this.$node.click=function(){var e=new Event("click",{bubbles:!0,cancelable:!0}),a=t.$node,n=a.ltProp("checked");a.ltProp("disabled")||(n||a.ltProp("checked",!0),a.dispatchEvent(e))},this.$node.focus=function(){var e=t.$node,a=e.querySelector("input");e.ltProp("disabled")||a.focus()},this.$node.blur=function(){var e=t.$node,a=e.querySelector("input");e.ltProp("disabled")||a.blur()},this.callMethodsOnInit(!0)},check:function(t,e){this.getMethods("onChecked")&&this.executeMethod("onChecked",t,e)},uncheck:function(t,e){this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",t,e)},beforeCheck:function(t,e){if(this.getMethods("onBeforeChecked"))return this.executeMethod("onBeforeChecked",t,e)},beforeUncheck:function(t,e){if(this.getMethods("onBeforeUnchecked"))return this.executeMethod("onBeforeUnchecked",t,e)},onchanged:function(t,e){this.getMethods("onChanged")&&this.executeMethod("onChanged",t,e)},extractRadios:function(){for(var t,e=this.getData("ltPropName"),a=0,n=document.querySelectorAll('input[type="radio"][name="'+e+'"]');a<n.length;a++){for(t=n[a];"LYTE-RADIOBUTTON"!==t.tagName&&"HTML"!==t.tagName;)t=t.parentElement;if("LYTE-RADIOBUTTON"===t.tagName&&t.ltProp("checked")&&t!=this.$node)return t}},changeChecks:function(t){var e,a=this.extractRadios(),n=(a&&a.querySelector("input"),a&&a.component),i=this.$node.querySelector("input");if(!t.newValue||!t.oldValue)if(t.newValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!1),a&&(e=this.beforeUncheck(i,this)),!1===e)return void this.revertState(a,this.$node);if(!1===this.beforeCheck(i,this))return void this.revertState(a,this.$node);a&&(n.setData("prevent",!0),a.ltProp("checked",!1),n.setData("prevent",!1),this.uncheck(i,this)),this.setData("ltPropChecked",!0),this.setData("prevent",!1),this.check(i,this),this.onchanged(i,this)}else if(!t.newValue&&t.oldValue){if(this.setData("prevent",!0),this.setData("ltPropChecked",!0),!1===(e=this.beforeUncheck(i,this)))return void this.revertState(this.$node,{});this.setData("ltPropChecked",!1),this.uncheck(i,this),this.onchanged(i,this),this.setData("prevent",!1)}},change:function(t){var e=this.getData("ltPropName"),a=document.querySelector('input[type="radio"][name="'+e+'"]:checked');this.getData("onChange")?t.newValue?this.check(a,this):this.uncheck(a,this.getData("second")):this.changeChecks(t)},resetValues:function(){for(var t,e=this.getData("ltPropName"),a=document.querySelectorAll('input[type="radio"][name="'+e+'"]'),n=0,i=a.length;n<i;n++)(t=a[n].parentElement.parentElement.component).setData("prev",void 0),t.setData("node",void 0)},valueChanged:function(t){var e=t.oldValue,a=t.newValue;e&&!a&&this.resetValues(),this.getData("prevent")||this.change(t)}.observes("ltPropChecked"),getParentRadio:function(t){for(;t&&"LYTE-RADIOBUTTON"!==t.tagName;)t=t.parentElement;return t},revertState:function(t,e){var a=(t||{}).component,n=(e||{}).component;a&&(a.setData("prevent",!0),a.setData("ltPropChecked",!0),t.querySelector("input").checked=!0,a.setData("prevent",!1)),n&&(n.setData("prevent",!0),n.setData("ltPropChecked",!1),e.querySelector("input").checked=!1,n.setData("prevent",!1))},callMethodsOnInit:function(){var t=this.getData("ltPropFireOnInit"),e=this.getData("ltPropChecked");if(t&&e){var a=this.$node.querySelector("input");a.getAttribute("value");this.beforeCheck(a,this),this.check(a,this),this.onchanged(a,this)}},actions:{preventPropagation:function(){32===event.keyCode&&(this.preventClick=!0)},mup:function(t){var e=this.getData("ltPropName"),a=document.querySelector('input[type="radio"][name="'+e+'"]:checked');this.setData("shouldCallUnChecked",!1),a&&(this.setData("prev",a.getAttribute("value")),this.setData("node",a),this.setData("shouldCallUnChecked",!0));var n=this.$node.querySelector("input"),i=n.checked;if(!n.disabled&&!i){if(this.getData("shouldCallUnChecked")&&!1===this.beforeUncheck(n,this))return void this.setData("revertState",!0);if(!1===this.beforeCheck(n,this))return void this.setData("revertState",!0)}},valueChanged:function(t){var e=t.target,a=e.getAttribute("value"),n=this.getData("prev"),i=this.getData("node"),s=this.getData("revertState"),o=this.getParentRadio(i),l=this.$node,r=i&&i.parentElement.parentElement.component;e.parentElement.parentElement;if(t.stopPropagation(),this.preventClick)this.preventClick=!1;else if(a!==n){if(s)return this.revertState(o,l),void this.setData("node",void 0);if(i){for(;"LYTE-RADIOBUTTON"!==i.tagName;)i=i.parentElement;r.setData("onChange",!0),r.setData("second",this),i.ltProp("checked",!1),r.setData("second",void 0),r.setData("onChange",!1)}(i=this.getData("node"))&&this.setData("node",void 0),this.setData("onChange",!0),this.setData("ltPropChecked",!0),this.setData("onChange",!1),this.onchanged(e,this)}}}}),document.addEventListener("keydown",function(t){var e,a=t.keyCode;if(13===a||32===a){if("INPUT"!==(e=document.activeElement).tagName)return;for(;"LYTE-RADIOBUTTON"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentElement;"LYTE-RADIOBUTTON"===e.tagName&&(e.ltProp("checked")||(e.ltProp("checked",!0),t.preventDefault()))}});