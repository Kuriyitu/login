if(!LytePopup){var LytePopup={components:[],bodywrapperCount:0,onEscape:function(t){("key"in(t=t||window.event)?"Escape"==t.key||"Esc"==t.key:27==t.keyCode)&&LytePopup.closePopup(void 0,!0)},bindDocumentKeydown:function(){document.addEventListener("keydown",LytePopup.onEscape,!0)},hideOrShowFreeze:function(t,e){var o,i="",l="",r="",s="";if("open"==t&&LytePopup.components.length>1){for(var a=LytePopup.components.length-2;a>=0;a--)if(i="LYTE-MODAL"==LytePopup.components[a].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[a].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",l="LYTE-MODAL"==e.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==e.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",r=LytePopup.components[a].childComp.querySelector(i),s=e.childComp.querySelector(l),o=e.getData("ltPropDimmer")&&e.getData("ltPropDimmer").opacity?e.getData("ltPropDimmer").opacity:"",r&&s){r.style.transition="none",s.style.transition="none",r.style.zIndex=15,r.style.opacity=0,s.style.visibility="visible",s.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,r),r.style.zIndex="",e.addedFreezeDetails=!0;break}}else if("close"==t&&LytePopup.components.length>1&&LytePopup.components[LytePopup.components.length-1]===e)for(a=LytePopup.components.length-2;a>=0;a--)if(i="LYTE-MODAL"==LytePopup.components[a].$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==LytePopup.components[a].$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",l="LYTE-MODAL"==e.$node.tagName?"lyte-modal-freeze":"LYTE-POPOVER"==e.$node.tagName?"lyte-popover-freeze":".alertFreezeLayer",r=LytePopup.components[a].childComp.querySelector(i),s=e.childComp.querySelector(l),o=LytePopup.components[a].getData("ltPropDimmer")&&LytePopup.components[a].getData("ltPropDimmer").opacity?LytePopup.components[a].getData("ltPropDimmer").opacity:"",r&&s){s.style.transition="none",r.style.transition="none",r.style.zIndex=15,s.style.opacity=0,r.style.visibility="visible",r.style.opacity=o,setTimeout(LytePopup.removeTransition,100,s,r),r.style.zIndex="",s.style.visibility="";break}},removeTransition:function(t,e){t.style.transition="",e.style.transition=""},addPopup:function(t){LytePopup.closePopup();var e=LytePopup.components.length;if(e>0){var o,i="",l="";i="LYTE-MODAL"==LytePopup.components[e-1].$node.tagName?".modalWrapper":"LYTE-POPOVER"==LytePopup.components[e-1].$node.tagName?".popoverWrapper":".alertWrapper",l="LYTE-MODAL"==t.$node.tagName?".modalWrapper":"LYTE-POPOVER"==t.$node.tagName?".popoverWrapper":".alertWrapper";var r=t.childComp.querySelector(l);(o=Number(document.defaultView.getComputedStyle(LytePopup.components[LytePopup.components.length-1].childComp.querySelector(i),null).getPropertyValue("z-index")))+2>Number(document.defaultView.getComputedStyle(r,null).getPropertyValue("z-index"))&&(r.style.zIndex=o+2)}LytePopup.components[e]=t,(t.getData("ltPropFreeze")||"LYTE-ALERT"==t.$node.tagName)&&LytePopup.hideOrShowFreeze("open",t)},closePopup:function(t,e){if(e){var o=LytePopup.components[LytePopup.components.length-1];o&&o.$node.ltProp("closeOnEscape")&&o.$node.ltProp("show",!1)}else if(t){var i=LytePopup.components.indexOf(t);i>-1&&LytePopup.components.splice(i,1)}else for(var l=LytePopup.components.length-1;l>=0;l--){if(LytePopup.components[l].$node&&!LytePopup.components[l].$node.ltProp("allowMultiple"))LytePopup.components[l].$node.ltProp("show",!1)}},getScrollParent:function(t){var e=t instanceof HTMLElement&&window.getComputedStyle(t).overflowY,o="visible"!==e&&"hidden"!==e,i=t&&o?t.scrollHeight:0,l=t&&o?t.clientHeight:0;return t?o&&i>=l?t:LytePopup.getScrollParent(t.parentNode)||document.body:null}};LytePopup.bindDocumentKeydown()}function addPopoverEvent(t){document.addEventListener("click",function(t){for(var e=t.target;!$L(e).hasClass("popoverWrapper")&&"LYTE-POPOVER-FREEZE"!=e.tagName&&"LYTE-DROP-BOX"!=e.tagName&&"HTML"!=e.tagName;)if(!(e=e.parentElement))return;if("HTML"==e.tagName||"LYTE-POPOVER-FREEZE"==e.tagName)for(var o=LytePopup.components.length-1;o>=0;o--)if("LYTE-POPOVER"==LytePopup.components[o].$node.tagName&&"visible"==LytePopup.components[o].childComp.style.visibility){var i=LytePopup.components[o].$node;i&&i.component.getData("visible")&&i.component.getData("ltPropCloseOnBodyClick")&&(i.component.setData("visible",!1),i.ltProp("show",!1))}},!0),window.addEventListener("scroll",function(t){if(LytePopup.makingVisible)LytePopup.makingVisible=!1;else for(var e,o=LytePopup.components.length-1;o>=0;o--)if(LytePopup.components[o].$node&&"LYTE-POPOVER"==LytePopup.components[o].$node.nodeName&&"visible"==LytePopup.components[o].childComp.style.visibility&&(e=LytePopup.components[o].childComp)&&e._callee.component.$node.ltProp("scrollable")&&LytePopup.components[o].callOnScroll(t)){var i=e.querySelector(".lytePopover");if(!i)return;for(;"LYTE-WORMHOLE"!=i.tagName;)i=i.parentElement;for(var l=t.target;"LYTE-WORMHOLE"!=l.tagName&&"HTML"!=l.tagName&&"#document"!=l.nodeName;)l=l.parentElement;if("LYTE-WORMHOLE"==l.tagName&&l.isEqualNode(i))return;if(i._callee.component.computeOffsetImpl(),i._callee.component.getData("ltPropForceScroll"))return;var r=document.querySelector(i._callee.ltProp("originElem")),s=t.target,a=r.getBoundingClientRect(),p=i._callee.ltProp("boundary"),n=i.querySelector(".lytePopover");if(0===Object.keys(p).length&&p.constructor===Object||(p.top&&n.getBoundingClientRect().top<parseFloat(p.top)?i._callee.ltProp("show",!1):p.bottom&&n.getBoundingClientRect().bottom>parseFloat(p.bottom)?i._callee.ltProp("show",!1):p.left&&n.getBoundingClientRect().left<parseFloat(p.left)?i._callee.ltProp("show",!1):p.right&&n.getBoundingClientRect().right>parseFloat(p.right)&&i._callee.ltProp("show",!1)),s.contains(r))if(i.querySelector("#lytePopoverArrow")&&i.querySelector("#lytePopoverArrow").classList.contains("lytePopoverArrowBottom")&&a.top+a.height/2>window.innerHeight&&i._callee.ltProp("show",!1),i.querySelector("#lytePopoverArrow")&&(i.querySelector("#lytePopoverArrow").classList.contains("lytePopoverArrowLeft")||i.querySelector("#lytePopoverArrow").classList.contains("lytePopoverArrowRight"))&&(i.querySelector("#lytePopoverArrow").getBoundingClientRect().bottom>=i.querySelector(".lytePopover").getBoundingClientRect().bottom||i.querySelector("#lytePopoverArrow").getBoundingClientRect().top<=i.querySelector(".lytePopover").getBoundingClientRect().top)&&i._callee.ltProp("show",!1),"#document"==s.nodeName){var d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);(a.top<=0||a.bottom+3>=d)&&i._callee.ltProp("show",!1),(a.left<=0||a.right+3>=h)&&i._callee.ltProp("show",!1)}else{var f=s.getBoundingClientRect();(f.top>a.top||f.top+f.height<a.top+a.height)&&i._callee.ltProp("show",!1),(f.left>a.left||f.left+f.width<a.left+a.width)&&i._callee.ltProp("show",!1)}}},!0),window.addEventListener("resize",function(t){LytePopup._lytePopoverRTId&&(clearTimeout(LytePopup._lytePopoverRTId),LytePopup._lytePopoverRTId=!1),LytePopup._lytePopoverRTId=setTimeout(function(){for(var e=LytePopup.components.length-1;e>=0;e--)if(LytePopup.components[e].$node&&"LYTE-POPOVER"==LytePopup.components[e].$node.nodeName&&"visible"==LytePopup.components[e].childComp.style.visibility&&LytePopup.components[e].childComp.querySelector(".lytePopover")){LytePopup.components[e].$node.component.updateScrollHandling(),LytePopup.components[e].$node.component.computeOffsetImpl(),LytePopup.components[e].$node.component.callOnResize(t);var o=document.querySelector(LytePopup.components[e].$node.ltProp("originElem")).getBoundingClientRect(),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);o.bottom+3>=i&&LytePopup.components[e].$node.ltProp("show",!1)}LytePopup._lytePopoverRTId=!1},100)},!0)}Lyte.Component.register("lyte-popover",{_template:'<template tag-name="lyte-popover">\n\t<template is="if" value="{{ltPropBindToBody}}"><template case="true"> \n\t<lyte-wormhole case="true" style="{{if(ltPropShowCopy,\'visibility:visible\',\'visibility:hidden\')}}" on-before-append="{{method(&quot;beforeWormholeAppend&quot;)}}">\n\t\t<template is="registerYield" yield-name="lyte-content">\n\t\t\t<div class="popoverWrapper {{ltPropWrapperClass}}">\n\t\t\t\t<div class="{{if(ifEquals(ltPropAnimation,\'zoom\'),\'lytePopover lyteZoom\', \'lytePopover\')}}">\n\t\t\t\t\t<template is="if" value="{{ifEquals(ltPropType,&quot;callout&quot;)}}"><template case="true">\n\t\t\t\t\t\t<span id="lytePopoverArrow" class="lytePopoverArrowIcon"></span>\n\t\t\t\t\t</template></template>\n\t\t\t\t\t<template is="if" value="{{ltPropShowCloseButton}}">\n\t\t\t\t\t\t<template case="true"><span class="lytePopoverClose" onclick="{{action(\'close\')}}"></span></template>\n\t\t\t\t\t</template>\n\t\t\t\t\t<lyte-yield yield-name="popover"></lyte-yield>\n\t\t\t\t</div>\n\t\t\t\t<template is="if" value="{{ltPropFreeze}}">\n\t\t\t\t\t<template case="true"><lyte-popover-freeze></lyte-popover-freeze></template>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</template>\n\t</lyte-wormhole>\n\t</template></template>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1],attr:{style:{name:"style",helperInfo:{name:"if",args:["ltPropShowCopy","'visibility:visible'","'visibility:hidden'"]}}}},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[]}},default:{}},{type:"attr",position:[1,1,3]},{type:"if",position:[1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[0]}]}},default:{}},{type:"insertYield",position:[1,1,5]},{type:"attr",position:[1,3]},{type:"if",position:[1,3],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[0]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]}},default:{}}],_observedAttributes:["ltPropShow","ltPropType","ltPropFreeze","ltPropShowCloseButton","ltPropCloseOnEscape","ltPropOriginElem","ltPropPosition","ltPropPlacement","ltPropDimmer","ltPropDraggable","ltPropAllowMultiple","ltPropScrollable","ltPropMaxHeight","ltPropMaxWidth","ltPropWidth","ltPropHeight","ltPropWrapperClass","ltPropBoundary","ltPropCloseOnBodyClick","ltPropDuration","ltPropOffset","ltPropBindToBody","ltPropHeaderPadding","ltPropContentPadding","ltPropFooterPadding","ltPropAnimation","ltPropWindowSpacing","ltPropForceScroll","buttons","ltPropShowCopy","visible","timeOutId","classTobeAdded","keys","first","arrowHidden","arrowEle","returnedFalse","transformOrigin","windowSpacing","lyteUnbound"],data:function(){return{ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"callout"}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropShowCloseButton:Lyte.attr("boolean",{default:!0}),ltPropCloseOnEscape:Lyte.attr("boolean",{default:!0}),ltPropOriginElem:Lyte.attr("string",{default:""}),ltPropPosition:Lyte.attr("string",{default:"bottom"}),ltPropPlacement:Lyte.attr("string",{default:""}),ltPropDimmer:Lyte.attr("object",{default:{color:"black",opacity:"0.4"}}),ltPropDraggable:Lyte.attr("boolean",{default:!1}),ltPropAllowMultiple:Lyte.attr("boolean",{default:!1}),ltPropScrollable:Lyte.attr("boolean",{default:!1}),ltPropMaxHeight:Lyte.attr("string",{default:""}),ltPropMaxWidth:Lyte.attr("string",{default:""}),ltPropWidth:Lyte.attr("string",{default:""}),ltPropHeight:Lyte.attr("string",{default:"auto"}),ltPropWrapperClass:Lyte.attr("string",{default:""}),ltPropBoundary:Lyte.attr("object",{default:{}}),ltPropCloseOnBodyClick:Lyte.attr("boolean",{default:!0}),ltPropDuration:Lyte.attr("number",{default:400}),ltPropOffset:Lyte.attr("object",{default:{}}),ltPropBindToBody:Lyte.attr("boolean",{default:!1}),ltPropHeaderPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropContentPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropFooterPadding:Lyte.attr("string",{default:"15px 30px"}),ltPropAnimation:Lyte.attr("string",{default:"fade"}),ltPropWindowSpacing:Lyte.attr("object"),ltPropForceScroll:Lyte.attr("boolean",{default:!1}),buttons:Lyte.attr("array",{default:[{type:"accept",text:"Ok"}]}),ltPropShowCopy:Lyte.attr("boolean",{default:!1}),visible:Lyte.attr("boolean",{default:!0}),timeOutId:Lyte.attr("number"),classTobeAdded:Lyte.attr("string"),keys:Lyte.attr("object",{default:{37:1,38:1,39:1,40:1}}),first:Lyte.attr("boolean",{default:!0}),arrowHidden:Lyte.attr("boolean",{default:!1}),arrowEle:Lyte.attr("object"),returnedFalse:Lyte.attr("boolean",{default:!1}),transformOrigin:Lyte.attr("string"),windowSpacing:Lyte.attr("object"),lyteUnbound:Lyte.attr("boolean",{default:!1})}},computeSpacing:function(){var t=Object.assign({},this.getData("ltPropWindowSpacing"));t.left||(t.left=30),t.right||(t.right=30),t.top||(t.top=30),t.bottom||(t.bottom=30),this.setData("windowSpacing",Object.assign({},t))}.observes("ltPropWindowSpacing").on("init"),addDragHandler:function(){var t=this.actualModalDiv.querySelector("lyte-popover-header");t?(t.parentEle=this,this.$node.ltProp("draggable")?(t.addEventListener("mousedown",this.handleMove,!0),t.addEventListener("touchstart",this.handleMove,!0),t.classList.add("draggable")):(t.removeEventListener("mousedown",this.handleMove,!0),t.removeEventListener("touchstart",this.handleMove,!0),t.classList.remove("draggable"))):(console.warn("This popover is not draggable because it has no header"),this.$node.ltProp("draggable",!1))},handleMove:function(t){var e=t.currentTarget.parentEle.actualModalDiv;LytePopup.node=e,"mousedown"==t.type?(LytePopup.xPos=t.clientX-this.getBoundingClientRect().left,LytePopup.yPos=t.clientY-this.getBoundingClientRect().top):"touchstart"==t.type&&(LytePopup.xPos=t.touches[0].clientX-this.getBoundingClientRect().left,LytePopup.yPos=t.touches[0].clientY-this.getBoundingClientRect().top);e.getBoundingClientRect();e.style.transitionDuration="0s";var o=e.parentElement.querySelector("#lytePopoverArrow");o&&(this.parentEle.setData("arrowHidden",!0),this.parentEle.setData("arrowEle",o),o.style.display="none"),"mousedown"==t.type?(document.body.addEventListener("mousemove",t.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("mouseup",t.currentTarget.parentEle.stopDrag,!0)):"touchstart"==t.type&&(document.body.addEventListener("touchmove",t.currentTarget.parentEle.handleDrag,!0),document.body.addEventListener("touchend",t.currentTarget.parentEle.stopDrag,!0))},handleDrag:function(t){var e=LytePopup.node;"mousemove"==t.type?(e.style.left=t.clientX-e.offsetParent.getBoundingClientRect().left-LytePopup.xPos+"px",e.style.top=t.clientY-e.offsetParent.getBoundingClientRect().top-LytePopup.yPos+"px"):"touchmove"==t.type&&(e.style.left=t.touches[0].clientX-e.offsetParent.getBoundingClientRect().left-LytePopup.xPos+"px",e.style.top=t.touches[0].clientY-e.offsetParent.getBoundingClientRect().top-LytePopup.yPos+"px"),window.getSelection().removeAllRanges()},stopDrag:function(t){for(var e=t.target;e&&e!==document;){if(e.parentEle){"mouseup"==t.type?(this.removeEventListener("mousemove",e.parentEle.handleDrag,!0),this.removeEventListener("mouseup",e.parentEle.stopDrag,!0)):"touchend"==t.type&&(this.removeEventListener("touchmove",e.parentEle.handleDrag,!0),this.removeEventListener("touchend",e.parentEle.stopDrag,!0));break}e=e.parentElement?e.parentElement:document}},showToggled:function(){var t=t||window.event;if(this.getData("returnedFalse"))this.setData("returnedFalse",!1);else if(this.$node.ltProp("show")&&!this.$node.ltProp("showCopy"))if(this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),_lyteUiUtils.getRTL()&&("bottomLeft"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","bottomRight"):"bottomRight"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","bottomLeft"):"topLeft"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","topRight"):"topRight"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","topLeft"):"left"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","right"):"right"==this.getData("ltPropPlacement")&&this.setData("ltPropPlacement","left")),this.$node.ltProp("bindToBody",!0),void 0==this.getData("ltPropDuration"))this.onBeforeShowHandling(t);else{var e=this;this.tIdBeforeShow=setTimeout(function(){delete e.tIdBeforeShow,e.onBeforeShowHandling(t)},0)}else if(this.tIdBeforeShow&&(clearTimeout(this.tIdBeforeShow),delete this.tIdBeforeShow),this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),delete this.tIdBeforeClose),this.$node.ltProp("showCopy"))if(void 0==this.getData("ltPropDuration"))this.onBeforeCloseHandling(t);else{e=this;this.tIdBeforeClose=setTimeout(function(){delete e.tIdBeforeClose,e.onBeforeCloseHandling(t)},0)}}.observes("ltPropShow").on("didConnect"),changeShow:function(){this.getData("ltPropBindToBody")||this.getData("ltPropShow")&&this.setData("ltPropShow",!1)}.observes("ltPropBindToBody"),callOnResize:function(t){this.getMethods("onResize")&&this.executeMethod("onResize",t,this)},callOnScroll:function(t){var e;return this.getMethods("onScroll")&&(e=this.executeMethod("onScroll",t,this)),void 0==e||e},updateScrollHandling:function(){!this.$node.ltProp("freeze")&&this.$node.ltProp("scrollable")&&this.$node.ltProp("scrollable",!0);var t,e=this.actualModalDiv,o=e.querySelector("lyte-popover-content");o=o||e,e.style.maxWidth="",e.style.maxHeight="",e.style.height=this.$node.ltProp("height")?this.$node.ltProp("height"):"auto",e.style.width=this.$node.ltProp("width")?this.$node.ltProp("width"):"auto",$L.fastdom.measure(function(){var i=e.getBoundingClientRect(),l=e.parentElement.getBoundingClientRect(),r=window.getComputedStyle(e),s=(r.borderTopWidth?parseFloat(r.borderTopWidth):0)+(r.borderBottomWidth?parseFloat(r.borderBottomWidth):0),a=this.getData("windowSpacing"),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(a.top+a.bottom);$L.fastdom.mutate(function(){if(this.$node.ltProp("maxWidth")&&(this.$node.ltProp("scrollable",!0),i.width,-1!=this.$node.ltProp("maxWidth").indexOf("%")?parseFloat(this.$node.ltProp("maxWidth"))/100*l.width:parseFloat(this.$node.ltProp("maxWidth")),e.style.maxWidth=this.$node.ltProp("maxWidth"),o.style.overflowX="auto"),this.$node.ltProp("maxHeight")){this.childComp.querySelector(".popoverWrapper").classList.add("scrollable"),this.$node.ltProp("scrollable",!0),i.height-s;var r=-1!=this.$node.ltProp("maxHeight").indexOf("%")?parseFloat(this.$node.ltProp("maxHeight"))/100*l.height:parseFloat(this.$node.ltProp("maxHeight"));e.style.maxHeight=this.$node.ltProp("maxHeight"),t=r-s}else i.height-s,t=p-20;if(this.$node.ltProp("scrollable")){var a=this.actualModalDiv.querySelector("lyte-popover-header"),n=this.actualModalDiv.querySelector("lyte-popover-footer"),d=0,h=0;$L.fastdom.measure(function(){a&&(this.$node.ltProp("maxWidth")&&(a.style.overflowX="auto"),d=a.offsetHeight),n&&(this.$node.ltProp("maxWidth")&&(n.style.overflowX="auto"),h=n.offsetHeight),$L.fastdom.mutate(function(){var i=t-(d+h);o.style.maxHeight=(i>0?i:50)+"px",o.style.overflowY="auto",e.style.width=this.$node.ltProp("width")?this.$node.ltProp("width"):"auto",e=null,o=null,a=null,n=null},this)},this)}else this.childComp.querySelector(".popoverWrapper").classList.remove("scrollable"),e=null,o=null},this)},this)},scrollHandling:function(){this.getData("ltPropShow")&&this.updateScrollHandling()}.observes("ltPropWidth","ltPropMaxWidth","ltPropHeight","ltPropMaxHeight"),computeOffsetImpl:function(){var t="",e="",o=this.actualModalDiv;$L.fastdom.measure(function(){if(this.$node.ltProp("showCopy")){if(""!=this.$node.ltProp("originElem")||!Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset"))){var i=this.$node.ltProp("originElem")?document.querySelector(this.$node.ltProp("originElem")):null;if(!i&&Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset")))return console.error("The origin element is either not present or may be removed. Kindly check."),LytePopup.closePopup(this),this.setData("visible",!1),this.$node.ltProp("freeze")&&(LytePopup.bodywrapperCount+=1,0==LytePopup.bodywrapperCount&&document.body.classList.remove("bodyWrapper")),void(!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"));var l,r=o.getBoundingClientRect(),s={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:o.offsetWidth,height:o.offsetHeight},a=Object.assign({},this.getData("windowSpacing")),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-a.bottom,n=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-a.right;if(Lyte.Component.registeredHelpers.lyteUiIsEmptyObject(this.$node.ltProp("offset"))){var d=i.getBoundingClientRect();l={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.width,height:d.height}}else l={width:parseInt(this.$node.ltProp("offset").width)||0,height:parseInt(this.$node.ltProp("offset").height)||0,top:parseInt(this.$node.ltProp("offset").top),left:parseInt(this.$node.ltProp("offset").left),bottom:parseInt(this.$node.ltProp("offset").top)+(parseInt(this.$node.ltProp("offset").height)||0),right:parseInt(this.$node.ltProp("offset").left)+(parseInt(this.$node.ltProp("offset").width)||0)};var h,f=l,c={},y={},u=this.$node.ltProp("positionNew"),m=!0,P=0,g=0;do{if(this.$node.ltProp("placement"))if(1==(h=this.$node.ltProp("placement").trim().split(" ")).length)switch(m=!0,c=this.positionPopover(this.$node.ltProp("placement"),f,s),u=this.$node.ltProp("placement")){case"bottom":case"top":c.offsetLeft+s.width>n&&(c.offsetLeft=Math.max(a.left,n-s.width)),c.offsetLeft<a.left&&(c.offsetLeft=a.left);break;case"left":case"right":c.offsetTop+s.height>p&&(c.offsetTop=Math.max(a.top,p-s.height)),c.offsetTop<a.top&&(c.offsetTop=a.top)}else if(g<h.length)switch(u=h[g],m=!0,y=c=this.positionPopover(u,f,s),u){case"bottom":if(p<y.offsetTop+s.height||p-(y.offsetTop+s.height)<a.bottom){g++,m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<c.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"bottomLeft":case"bottomRight":if(p<y.offsetTop+s.height||p-(y.offsetTop+s.height)<a.bottom){g++,m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<y.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"top":if(y.offsetTop-s.height<a.top){g++,m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<c.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"topLeft":case"topRight":if(y.offsetTop-s.height<a.top){g++,m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<y.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"left":if(y.offsetTop<a.top){g++,m=!1;break}if(y.offsetLeft<a.left){g++,m=!1,t=f.left+f.width+9,e=f.top;break}y.offsetTop-s.height<a.top&&(c.offsetTop=f.top),p<c.offsetTop+s.height&&(c.offsetTop=p-s.height);break;case"right":if(y.offsetTop<a.top){g++,m=!1;break}if(n<y.offsetLeft+s.width){g++,m=!1,c.offsetLeft=f.left-s.width-9,c.offsetTop=f.top;break}y.offsetTop-s.height<a.top&&(c.offsetTop=f.top),p<c.offsetTop+s.height&&(c.offsetTop=p-s.height)}else m=!0;else switch(P++,m=!0,y=c=this.positionPopover(u,f,s),u){case"bottom":if(p<y.offsetTop+s.height||p-(y.offsetTop+s.height)<a.bottom){u="top",m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<c.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"bottomLeft":case"bottomRight":if(p<y.offsetTop+s.height||p-(y.offsetTop+s.height)<a.bottom){u="top",m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<y.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"top":if(y.offsetTop-s.height<a.top){u=_lyteUiUtils.getRTL()?"left":"right",m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<c.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"topLeft":if(y.offsetTop-s.height<a.top){u="right",m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<y.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"topRight":if(y.offsetTop-s.height<a.top){u="left",m=!1;break}y.offsetLeft-s.width<a.left&&(c.offsetLeft=f.left,m=!0),n<y.offsetLeft+s.width&&(c.offsetLeft=n-s.width-10,m=!0);break;case"left":if(y.offsetTop<a.top){u="bottom",m=!1;break}y.offsetLeft<a.left&&(u="right",t=f.left+f.width+9,e=f.top),y.offsetTop-s.height<a.top&&(c.offsetTop=f.top),p<c.offsetTop+s.height&&(c.offsetTop=Math.max(a.top,p-s.height));break;case"right":if(y.offsetTop<a.top){u="bottom",m=!1;break}n<y.offsetLeft+s.width&&(u="left",c.offsetLeft=f.left-s.width-9,c.offsetTop=f.top),y.offsetTop-s.height<a.top&&(c.offsetTop=f.top),p<c.offsetTop+s.height&&(c.offsetTop=Math.max(a.top,p-s.height))}}while(!m&&P<=8);if(this.getData("ltPropForceScroll")&&("left"!=u&&"right"!=u||(c.offsetTop>f.top?c.offsetTop=f.top:c.offsetTop+s.height<f.bottom&&(c.offsetTop=f.bottom-s.height))),t=c.offsetLeft,e=c.offsetTop,"callout"===this.$node.ltProp("type")){u.indexOf("bottom")>-1?(c.classTobeAdded="lytePopoverArrowTop",c.posClass="lytePopBottomToOrig"):u.indexOf("top")>-1?(c.classTobeAdded="lytePopoverArrowBottom",c.posClass="lytePopTopToOrig"):"left"===u?(c.classTobeAdded="lytePopoverArrowRight",c.posClass="lytePopLeftToOrig"):"right"===u&&(c.classTobeAdded="lytePopoverArrowLeft",c.posClass="lytePopRightToOrig");var L,v=o.querySelector("#lytePopoverArrow");v.classList.remove("lytePopoverArrowTop","lytePopoverArrowBottom","lytePopoverArrowRight","lytePopoverArrowLeft"),v.classList.add(c.classTobeAdded),o.parentElement.classList.contains(c.posClass)||(o.parentElement.classList.remove("lytePopBottomToOrig","lytePopTopToOrig","lytePopLeftToOrig","lytePopRightToOrig"),o.parentElement.classList.add(c.posClass)),$L.fastdom.measure(function(){L=v.getBoundingClientRect()}),$L.fastdom.mutate(function(){if("lytePopoverArrowTop"===c.classTobeAdded||"lytePopoverArrowBottom"===c.classTobeAdded){var o=Math.abs(t-(f.left+(f.width-v.offsetWidth)/2));if(v.style.left=o+"px",v.style.top="",L.left<12&&l.width<=16){var i=12-L.left;l.left==t&&t-i>=0&&(o=L.left+i,v.style.left=o+"px",t-=i)}else if(s.width-L.right<12&&l.width<=16){i=12-(s.width-v.getBoundingClientRect().right);l.left+l.width==s.width+t&&(o=L.left-i,v.style.left=o+"px",t+=i)}"lytePopoverArrowTop"===c.classTobeAdded&&this.setData("transformOrigin",Math.round(o)+"px top"),"lytePopoverArrowBottom"===c.classTobeAdded&&this.setData("transformOrigin",Math.round(o)+"px bottom")}else{var r=Math.abs(e-(f.top+(f.height-v.offsetHeight)/2));if(v.style.left="",v.style.top=r+"px",L.top<12&&l.height<=16){i=12-L.top;l.top==e&&e-i>=0&&(r=L.top+i,v.style.top=r+"px",e-=i)}else if(s.height-L.bottom<12&&l.height<=16){i=12-(s.height-L.bottom);l.top+l.height==s.height+e&&(r=L.top-i,v.style.top=r+"px",e+=i)}"lytePopoverArrowLeft"===c.classTobeAdded&&this.setData("transformOrigin","left "+Math.round(r)+"px"),"lytePopoverArrowRight"===c.classTobeAdded&&this.setData("transformOrigin","right "+Math.round(r)+"px")}},this)}this.setData("classTobeAdded",c.classTobeAdded)}this.$node.ltProp("positionNew",u),$L.fastdom.mutate(function(){o.style.left=t+"px",o.style.top=e+"px",this.getData("first")&&(this.callOnShow(),this.setOpacityAndVisibility(),this.setData("first",!1))},this)}},this),this.$node.ltProp("freeze")&&(document.body.classList.add("bodyWrapper"),LytePopup.bodywrapperCount+=1)},positionPopover:function(t,e,o){var i=0,l=0;switch(t){case"bottom":i=e.left-(o.width-e.width)/2,l=e.top+e.height+("box"==this.getData("ltPropType")?0:9),classTobeAdded="lytePopoverArrowTop";break;case"bottomLeft":i=e.left,l=e.top+e.height+("box"==this.getData("ltPropType")?0:9),classTobeAdded="lytePopoverArrowTop";break;case"bottomRight":i=e.left+e.width-o.width,l=e.top+e.height+("box"==this.getData("ltPropType")?0:9),classTobeAdded="lytePopoverArrowTop";break;case"top":i=e.left-(o.width-e.width)/2,l=e.top-(o.height+("box"==this.getData("ltPropType")?0:9)),classTobeAdded="lytePopoverArrowBottom";break;case"topLeft":i=e.left,l=e.top-(o.height+("box"==this.getData("ltPropType")?0:9)),classTobeAdded="lytePopoverArrowBottom";break;case"topRight":i=e.left+e.width-o.width,l=e.top-(o.height+("box"==this.getData("ltPropType")?0:9)),classTobeAdded="lytePopoverArrowBottom";break;case"left":i=e.left-o.width-("box"==this.getData("ltPropType")?0:9),l=e.top,classTobeAdded="lytePopoverArrowRight";break;case"right":i=e.left+e.width+("box"==this.getData("ltPropType")?0:9),l=e.top,classTobeAdded="lytePopoverArrowLeft"}return{offsetLeft:i,offsetTop:l,classTobeAdded:classTobeAdded}},callOnShow:function(){this.getMethods("onShow")&&this.executeMethod("onShow",this)},setOpacityAndVisibility:function(){if("zoom"===this.getData("ltPropAnimation")){this.actualModalDiv.style.transition="none",this.actualModalDiv.style.transform="scale(0)",this.actualModalDiv.style.opacity="1";var t=this;setTimeout(function(){t.actualModalDiv.style.transition="",t.actualModalDiv.style.transitionDuration=parseFloat(t.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,t.actualModalDiv.style.transformOrigin=t.getData("transformOrigin"),t.actualModalDiv.style.transform="scale(1)"},50)}else this.actualModalDiv.style.transitionDuration=parseFloat(this.getData("ltPropDuration"))/1e3+"s",LytePopup.makingVisible=!0,this.actualModalDiv.style.opacity="1"},onBeforeCloseHandling:function(t){var e=!0;if(this.getMethods("onBeforeClose")&&(e=this.executeMethod("onBeforeClose",t,this)),void 0===e||e){if(this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),this.getData("arrowHidden")&&(this.getData("arrowEle").style.display="",this.setData("arrowHidden",!1),this.setData("arrowEle",null)),_lyteUiUtils.getRTL()&&("bottomLeft"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","bottomRight"):"bottomRight"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","bottomLeft"):"topLeft"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","topRight"):"topRight"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","topLeft"):"left"==this.getData("ltPropPlacement")?this.setData("ltPropPlacement","right"):"right"==this.getData("ltPropPlacement")&&this.setData("ltPropPlacement","left")),void 0==this.getData("ltPropDuration"))this.$node.ltProp({showCopy:!1,show:!1}),this.getMethods("onClose")&&this.executeMethod("onClose",t,this),this.$node.ltProp("freeze")&&(LytePopup.bodywrapperCount-=1,0!=LytePopup.bodywrapperCount&&0!=LytePopup.components.length||document.body.classList.remove("bodyWrapper"));else{var o=parseInt(this.getData("ltPropDuration")),i=this;this.tIdClose=setTimeout(function(){i.tIdClose=!1,"zoom"==i.getData("ltPropAnimation")&&(i.actualModalDiv.style.opacity="0",i.actualModalDiv.style.transform=""),i.$node.ltProp({showCopy:!1,show:!1}),i.getMethods("onClose")&&i.executeMethod("onClose",t,i),i.$node.ltProp("freeze")&&(LytePopup.bodywrapperCount-=1,0!=LytePopup.bodywrapperCount&&0!=LytePopup.components.length||document.body.classList.remove("bodyWrapper"))},o),this.actualModalDiv.style.transitionDuration=(0==o?0:o>300?o-200:100)/1e3+"s"}"zoom"==this.getData("ltPropAnimation")?this.actualModalDiv.style.transform="scale(0)":this.actualModalDiv.style.opacity=0,LytePopup.closePopup(this),this.setData("visible",!1),this.$node.ltProp("freeze")&&this.childComp.querySelector("lyte-popover-freeze")&&(this.childComp.querySelector("lyte-popover-freeze").style.opacity=0,this.childComp.querySelector("lyte-popover-freeze").style.visibility=""),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.remove("noFreeze"),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling")}else this.setData("returnedFalse",!0),this.getData("visible")||this.setData("visible",!0),this.$node.ltProp("show",!0)},onBeforeShowHandling:function(){var t=!0;if(this.getMethods("onBeforeShow")&&(t=this.executeMethod("onBeforeShow",this)),void 0===t||t){if(this.getData("ltPropDraggable")&&this.addDragHandler(),this.updateScrollHandling(),this.$node.ltProp("freeze")||this.childComp.querySelector(".popoverWrapper").classList.add("noFreeze"),this.$node.ltProp("positionNew",this.$node.ltProp("position")),void 0==this.getData("ltPropDuration"))this.$node.ltProp("showCopy",!0),$L.fastdom.mutate(function(){$L.fastdom.measure(function(){$L.fastdom.mutate(function(){this.computeOffsetImpl()},this)},this)},this);else{var e=this;setTimeout(function(){e.$node.ltProp("showCopy",!0),$L.fastdom.mutate(function(){$L.fastdom.measure(function(){$L.fastdom.mutate(function(){e.computeOffsetImpl()},e)},e)},e)},0)}if(this.getData("first")||this.setData("first",!0),$L.fastdom.measure(function(){var t=this.$node.ltProp("originElem")?LytePopup.getScrollParent(document.querySelector(this.$node.ltProp("originElem"))):null;this.getData("ltPropFreeze")||t&&t.isEqualNode(document.body)||document.body.classList.add("lyteStopBodyScrolling")},this),this.getData("visible")||this.setData("visible",!0),LytePopup.addPopup(this),this.$node.ltProp("freeze")){var o=this.childComp.querySelector("lyte-popover-freeze").style;o.background=this.getData("ltPropDimmer").color,this.addedFreezeDetails||(o.opacity=this.getData("ltPropDimmer").opacity)}}else this.$node.ltProp({showCopy:!1,show:!1})},didDestroy:function(){this.childComp&&(this.tIdBeforeClose&&(clearTimeout(this.tIdBeforeClose),this.tIdBeforeClose=!1),this.tIdClose&&(clearTimeout(this.tIdClose),this.tIdClose=!1),this.getData("ltPropFreeze")&&this.addedFreezeDetails&&(LytePopup.hideOrShowFreeze("close",this),delete this.addedFreezeDetails),LytePopup.closePopup(this),this.childComp.remove(),delete this.childComp,delete this.actualModalDiv,this.$node.ltProp("freeze")&&(LytePopup.bodywrapperCount-=1,0!=LytePopup.bodywrapperCount&&0!=LytePopup.components.length||document.body.classList.remove("bodyWrapper")),!this.getData("ltPropFreeze")&&document.body.classList.contains("lyteStopBodyScrolling")&&document.body.classList.remove("lyteStopBodyScrolling"))},actions:{close:function(){this.$node.ltProp("show",!1)}},methods:{beforeWormholeAppend:function(t){if(this.childComp=t,this.$node.parentElement&&"LYTE-COLORPICKER"==this.$node.parentElement.tagName&&(this.$node.parentElement.component.childComp=this.childComp),this.childComp.querySelector("lyte-popover-header")&&(this.childComp.querySelector("lyte-popover-header").style.padding=this.getData("ltPropHeaderPadding")),this.childComp.querySelector("lyte-popover-content")&&(this.childComp.querySelector("lyte-popover-content").style.padding=this.getData("ltPropContentPadding")),this.childComp.querySelector("lyte-popover-footer")&&(this.childComp.querySelector("lyte-popover-footer").style.padding=this.getData("ltPropFooterPadding")),this.actualModalDiv=this.childComp.querySelector(".lytePopover"),this.childComp.querySelector("lyte-popover-header")&&this.getData("ltPropShowCloseButton")){var e=0,o=0;$L.fastdom.measure(function(){e=this.childComp.querySelector("lyte-popover-header").offsetHeight,o=this.childComp.querySelector(".lytePopoverClose").offsetHeight},this),$L.fastdom.mutate(function(){this.childComp.querySelector(".lytePopoverClose").style.top=(e-o)/2+"px"},this)}}}}),"complete"===document.readyState||"interactive"===document.readyState?addPopoverEvent():document.addEventListener("DOMContentLoaded",function(t){addPopoverEvent(t)});