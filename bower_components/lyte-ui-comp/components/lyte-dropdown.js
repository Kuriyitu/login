Lyte.Component.register("lyte-dropdown",{_template:'<template tag-name="lyte-dropdown">\n\t<template is="if" value="{{expHandlers(ltPropHover,\'==\',true)}}"><template case="true">\n\t\t<template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true">\n\t\t\t<template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true">\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true">\n\t\t\t\t\t<lyte-drop-button>\n\t\t\t\t\t\t<div class="lyteMultiselect">\n\t\t\t\t\t\t\t<ul class="lyteMultipleSelect">\n\t\t\t\t\t\t\t\t<template is="for" items="{{allSelected}}" item="item" index="indexVal">\n\t\t\t\t\t\t\t\t\t<li data-value="{{item[\'value\']}}">\n\t\t\t\t\t\t\t\t\t\t<span class="lyteDropdownVisible">{{item[\'display\']}}</span>\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<li class="lyteMultiselectInput">\n\t\t\t\t\t\t\t\t\t<input onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}" onclick="{{action(\'showHide\',event)}}">\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t</template><template case="false">\n\n\t\t\t\t</template></template>\n\t\t\t</template><template case="false">\n\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t\t<div class="lyteDummyEventContainer" onclick="{{action(\'showHide\',event)}}" onkeyup="{{action(\'checkKey\',event)}}" tabindex="{{ltPropTabindex}}">\n\t\t\t\t\t\t<lyte-drop-button>\n\t\t\t\t\t\t\t<template is="if" value="{{expHandlers(allSelected.length,\'==\',0)}}"><template case="true">\n\t\t\t\t\t\t\t\t<span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span>\n\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t\t<ul class="lyteMultipleSelect">\n\t\t\t\t\t\t\t\t<template is="for" items="{{allSelected}}" item="item" index="indexVal">\n\t\t\t\t\t\t\t\t\t<li data-value="{{item[\'value\']}}">\n\t\t\t\t\t\t\t\t\t\t<span class="lyteDropdownVisible">{{item[\'display\']}}</span>\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t\t</div>\n\t\t\t\t</template><template case="false">\n\n\t\t\t\t</template></template>\n\t\t\t</template></template>\n\t\t</template><template case="false">\n\t\t\t<div onmouseenter="{{action(\'showHide\',event,\'enter\')}}" onmouseleave="{{action(\'closeIt\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style="">\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t\t<lyte-drop-button>\n\t\t\t\t\t\t<template is="if" value="{{ltPropDisplayValue}}"><template case="true">\n\t\t\t\t\t\t\t<span class="lyteMarginRight lyteDropdownLabel" onmouseenter="{{action(\'toolTipConfig\',this)}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" lt-prop-tooltip-config="{{ltPropTooltip}}">{{ltPropDisplayValue}}</span>\n\t\t\t\t\t\t</template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true">\n\t\t\t\t\t\t\t<span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span>\n\t\t\t\t\t\t</template></template></template></template>\n\t\t\t\t\t\t<lyte-icon class="{{ltPropIconClass}}"></lyte-icon>\n\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t</template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true">\n\t\t\t\t\t\n\t\t\t\t</template></template></template></template>\n\t\t\t</div>\n\t\t</template></template>\n\t</template><template case="false">\n\t\t<template is="if" value="{{expHandlers(multiple,\'==\',true)}}"><template case="true">\n\t\t\t<template is="if" value="{{expHandlers(search,\'==\',true)}}"><template case="true">\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',\'noyield\')}}"><template case="true">\n\t\t\t\t\t<lyte-drop-button onclick="{{action(\'showHide\',event)}}">\n\t\t\t\t\t\t<div class="lyteMultiselect">\n\t\t\t\t\t\t\t<ul class="lyteMultipleSelect">\n\t\t\t\t\t\t\t\t<template is="for" items="{{allSelected}}" item="item" index="indexVal">\n\t\t\t\t\t\t\t\t\t<li data-value="{{item[\'value\']}}">\n\t\t\t\t\t\t\t\t\t\t<span class="lyteDropdownVisible">{{item[\'display\']}}</span>\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<li class="lyteMultiselectInput">\n\t\t\t\t\t\t\t\t\t<input onkeydown="{{action(\'preventDefault\',event)}}" type="text" placeholder="{{ltPropPlaceholder}}" class="lyteDropdownTextField" autocomplete="off" tabindex="{{ltPropTabindex}}">\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t</template><template case="false">\n\t\t\t\t\t<div class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style="" onclick="{{action(\'showHide\',event)}}">\n\n\t\t\t\t\t</div>\n\t\t\t\t</template></template>\n\t\t\t</template><template case="false">\n\t\t\t\t<div class="lyteDummyEventContainer" onclick="{{action(\'showHide\',event)}}" tabindex="{{ltPropTabindex}}">\n\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t\t<lyte-drop-button>\n\t\t\t\t\t\t<template is="if" value="{{expHandlers(allSelected.length,\'==\',0)}}"><template case="true">\n\t\t\t\t\t\t\t<span class="lyteDropPlaceholderMultiple">{{ltPropPlaceholder}}</span>\n\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t<ul class="lyteMultipleSelect">\n\t\t\t\t\t\t\t<template is="for" items="{{allSelected}}" item="item" index="indexVal">\n\t\t\t\t\t\t\t\t<li data-value="{{item[\'value\']}}">\n\t\t\t\t\t\t\t\t\t<span class="lyteDropdownVisible">{{item[\'display\']}}</span>\n\t\t\t\t\t\t\t\t\t<lyte-drop-remove class="lyteCloseIcon"></lyte-drop-remove>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t</template><template case="false">\n\n\t\t\t\t</template></template>\n\t\t\t\t</div>\n\t\t\t</template></template>\n\t\t</template><template case="false">\n\t\t\t<div onclick="{{action(\'showHide\',event)}}" class="lyteDummyEventContainer" tabindex="{{ltPropTabindex}}" style="">\n\t\t\t\t<template is="if" value="{{expHandlers(drophead,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t\t<lyte-drop-button>\n\t\t\t\t\t\t<template is="if" value="{{ltPropDisplayValue}}"><template case="true">\n\t\t\t\t\t\t\t<span onmouseenter="{{action(\'toolTipConfig\',this)}}" lt-prop-tooltip-config="{{ltPropTooltip}}" lt-prop-title="{{if(showToolTip,ltPropDisplayValue,\'\')}}" class="lyteMarginRight lyteDropdownLabel">{{ltPropDisplayValue}}</span>\n\t\t\t\t\t\t</template><template case="false"><template is="if" value="{{expHandlers(expHandlers(ltPropSelected,\'!\'),\'&amp;&amp;\',expHandlers(ltPropDisplayValue,\'!\'))}}"><template case="true">\n\t\t\t\t\t\t\t<span class="lyteDropPlaceholderNormal">{{ltPropPlaceholder}}</span>\n\t\t\t\t\t\t</template></template></template></template>\n\t\t\t\t\t\t<lyte-icon class="{{ltPropIconClass}}"></lyte-icon>\n\t\t\t\t\t</lyte-drop-button>\n\t\t\t\t</template><template case="false"><template is="if" value="{{expHandlers(drophead,\'==\',&quot;yield&quot;)}}"><template case="true">\n\t\t\t\t\t\n\t\t\t\t</template></template></template></template>\n\t\t\t</div>\n\t\t</template></template>\n\t</template></template>\n\t\t<template is="if" value="{{expHandlers(ltPropHover,\'==\',false)}}"><template case="true">\n\t\t\t<template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t<lyte-drop-box class="lyteDropdownHidden">\n\t\t\t\t<lyte-drop-body>\n\t\t\t\t\t<template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true">\n\t\t\t\t\t\t\t<lyte-drop-group>\n\t\t\t\t\t\t\t\t<lyte-drop-label>{{lyteUiReturnOnlyKey(item)}}</lyte-drop-label>\n\t\t\t\t\t\t\t\t<template is="for" items="{{lyteUiReturnValueBy(item,lyteUiReturnOnlyKey(item))}}" item="subitem" index="indexval">\n\t\t\t\t\t\t\t\t\t<template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true">\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item>\n\t\t\t\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item>\n\t\t\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</lyte-drop-group>\n\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t<template is="if" value="{{lyteUiIsObject(item)}}"><template case="true">\n\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item>\n\t\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item>\n\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t</template></template>\n\t\t\t\t\t</template>\n\t\t\t\t\t\n\t\t\t\t</lyte-drop-body>\n\t\t\t\t</lyte-drop-box>\n\t\t\t</template><template case="false">\n\n\t\t\t</template></template>\n\t\t\t<div class="lyteLoadMsg" style="display:none;">Loading</div>\n\t\t</template><template case="false">\n\t\t\t<template is="if" value="{{expHandlers(dropbody,\'==\',&quot;noyield&quot;)}}"><template case="true">\n\t\t\t\t<lyte-drop-box>\n\t\t\t\t<lyte-drop-body>\n\t\t\t\t\t<template is="for" items="{{ltPropOptions}}" item="item" index="indexVal"><template is="if" value="{{lyteUiOptGroupCheck(item)}}"><template case="true">\n\t\t\t\t\t\t\t<lyte-drop-group>\n\t\t\t\t\t\t\t\t<lyte-drop-label>lyteUiReturnOnlyKey(item)</lyte-drop-label>\n\t\t\t\t\t\t\t\t<template is="for" items="{{lyteUiReturnValueBy(item,lyteReturnOnlyKey(item))}}" item="subitem" index="indexval">\n\t\t\t\t\t\t\t\t\t<template is="if" value="{{lyteUiIsObject(subitem)}}"><template case="true">\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{subitem[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem[ltPropSystemValue])}}">{{subitem[ltPropUserValue]}}</lyte-drop-item>\n\t\t\t\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{subitem}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,subitem)}}">{{subitem}}</lyte-drop-item>\n\t\t\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</lyte-drop-group>\n\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t<template is="if" value="{{lyteUiIsObject(item)}}"><template case="true">\n\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item[ltPropSystemValue]}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item[ltPropSystemValue])}}">{{item[ltPropUserValue]}}</lyte-drop-item>\n\t\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t\t<lyte-drop-item data-value="{{item}}" disabled="{{lyteUiCheckDisabled(ltPropDisabledList,item)}}">{{item}}</lyte-drop-item>\n\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t</template></template>\n\t\t\t\t\t</template>\n\t\t\t\t</lyte-drop-body>\n\t\t\t\t</lyte-drop-box>\n\t\t\t</template><template case="false">\n\n\t\t\t</template></template>\n\t\t\t<div class="lyteLoadMsg" style="display:none;">Loading</div>\n\t\t</template></template>\n\t\t<lyte-yield yield-name="yield" style="display: none;"></lyte-yield>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,1,3,1]},{type:"for",position:[1,1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"componentDynamic",position:[1,1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1,1,1]},{type:"for",position:[1,1,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"attr",position:[1,1,1,3,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}},{type:"attr",position:[1,3,1]},{type:"for",position:[1,3,1],dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,3]}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,0]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,3]},{type:"componentDynamic",position:[1,3]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[]}},default:{}}]}},default:{}}]}},default:{}}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1,1,0]},{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1,1]},{type:"for",position:[1,1,1],dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"componentDynamic",position:[1,1]},{type:"attr",position:[1,3]},{type:"for",position:[1,3],dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"text",position:[1,0]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]},{type:"componentDynamic",position:[1,1]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[]}},default:{}}]}},default:{}},{type:"insertYield",position:[5]}],_observedAttributes:["changeItToInvoke","dummy1","dummy2","savedPositions","ltPropRemoveMultiple","ltPropYield","ltPropType","ltPropTabindex","ltPropShow","ltPropFreeze","ltPropOptions","ltPropUserValue","ltPropSystemValue","ltPropPosition","ltPropIconClass","ltPropSelected","ltPropCallout","ltPropPlaceholder","ltPropDisabled","ltPropHover","ltPropNoResult","ltPropMaxCount","ltPropInputClass","allSelected","ltPropBoundary","pos","firePos","ltPropAjaxRequest","firstRequest","ltPropDisplayValue","ltPropDisabledList","ltPropAnimate","ltPropSetPos","ltPropTooltip","ltPropBoxClass","ltPropIsOpen","ltPropFixPositionOnOpen"],init:function(){var t,e=this.getData("ltPropType"),o=this.getData("ltPropSelected");(this._close=this.closeDrop1.bind(this),this._transEnd=this.tranEnd.bind(this),document.getElementById("lytedropdownfreezelayer"))||((t=document.createElement("div")).setAttribute("id","lytedropdownfreezelayer"),t.style.display="none",t.style.opacity="0.01",t.style.background="#fff",document.body.appendChild(t));this.$node.resetPosition=function(){var t=this.component,e=t.getData("ltPropFixPositionOnOpen");t.setCss(!1,e)},this.$node.toggle=function(t,e){var o=t||void 0;this.component.getData("ltPropDisabled")||this.constructor._actions.showHide.call(this.component,o,e,!0)},this.$node.open=function(){this.component.getData("ltPropIsOpen")||this.toggle()},this.$node.close=function(){this.component;this.getData("ltPropIsOpen")&&this.toggle()},-1===e.indexOf("multiple")&&-1===e.indexOf("multisearch")||(this.setData("multiple",!0),this.setData("allSelected",[]),o||this.setData("ltPropSelected","[]"),-1!==e.indexOf("multisearch")&&this.setData("search",!0))},didDestroy:function(){var t=this.childComp,e=this.$node.mutobserver,o=this.getData("ltPropFreeze");t&&(!t.classList.contains("lyteDropdownHidden")&&o&&(document.getElementById("lytedropdownfreezelayer").style.display="none"),delete t.origindd,t.remove()),e&&e.disconnect(),_lyteDropdown.autoClosed===this.$node&&(_lyteDropdown.autoClosed=null),_lyteDropdown.lastDropdownWithAPromise===this.$node&&(_lyteDropdown.lastDropdownWithAPromise=null),this._inputElement&&(this._inputElement.removeEventListener("keyup",this._function),$L(this._inputElement).removeSearch(),this._inputElement=null),delete this.childComp,delete this.$node.toggle,delete this.$node.element,this.$node.mutobserver=null},prerequisites:function(){var t,e=this.getDropBody(this.childComp);this.data.ltPropAnimate&&(this._hgtRemoval=!0,e.style.height=""),this.setCss(!1,!0),this.openSlideAnimate(),this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.getData("call")&&this.getMethods("onShow")&&(t=!0===(t=this.getData("call"))?void 0:t,this.executeMethod("onShow",t,this)),this.setData("call",null)},getChildren:function(t){var e,o=this.getData("drophead"),i=this.getData("dropbody"),l=0,s=this.$node;if("yield"!==o||"yield"!==i)for(;l<t.length;l++)"LYTE-DROPDOWN"!==(e=t[l].tagName)&&"TEMPLATE"!==e&&("LYTE-DROP-BOX"===e?(this.setData("dropbody","yield"),s.querySelector("lyte-drop-box").classList.add("lyteDropdownHidden")):"LYTE-DROP-BUTTON"===e?(this.setData("drophead","yield"),_lyteUiUtils.appendChild(s.querySelector(".lyteDummyEventContainer"),s.querySelector("lyte-drop-button")),l--):this.getChildren(t[l].children))},setBoxClass:function(t){var e=this.getData("ltPropBoxClass"),o=this.childComp||this.$node.querySelector("lyte-drop-box");"noyield"===this.getData("dropbody")&&(e&&o.classList.add(e),t&&o.classList.remove(t))},didConnect:function(){var t,e,o,i,l,s,a,r,n,p,d=this.$node,c=this.childComp,h=this.getData("ltPropNoResult"),y=d.querySelector("lyte-yield"),u=this.getData("ltPropPlaceholder"),m=this.getData("ltPropHover"),f=this.getData("ltPropSelected"),g=this.getData("ltPropOptions"),D=this.getData("ltPropType"),b=this.getData("ltPropDisabled"),v=this.getData("ltPropTabindex"),w=this.getData("ltPropShow"),P=this.getData("ltPropDisabledList");this.getData("ltPropDisplayValue");if(this.determine(y),a=this.getData("drophead"),r=this.getData("dropbody"),"yield"!==a&&this.setData("drophead",a="noyield"),"yield"!==r&&this.setData("dropbody",r="noyield"),t=d.querySelector("lyte-drop-box"),this.setBoxClass(),d.mutobserver=new MutationObserver(function(t){if(this._prevent||this._preventClass)this._preventClass=!1;else if(this._hgtRemoval)delete this._hgtRemoval;else{var e,o,i=this.childComp?this.childComp:d.querySelector("lyte-drop-box");if(!this.getData("ltPropSetPos")&&!i.classList.contains("lyteDropdownHidden")){if(this.getData("multiple")){var l=!1;for(e=0;e<t.length;e++){if("attributes"!==t[e].type||"lyte-hidden"!==t[e].attributeName)if(a="childList"==t[e].type||"selected"==t[e].attributeName||"class"==t[e].attributeName&&!t[e].target.classList.contains("lyteArrow")&&("LYTE-DROP-ITEM"!==t[e].target.tagName||!this.hasClassToggled(t[e],"lyteDropdownSelection")&&!this.hasClassToggled(t[e],"lyteMenuSelected"))||"style"==t[e].attributeName&&"LYTE-DROP-BOX"!=t[e].target.tagName&&!t[e].target.classList.contains("lyteArrow")||"style"===t[e].attributeName&&"LYTE-DROP-BOX"===t[e].target.tagName&&this.isVisibilityModified(t[e].oldValue,t[e].target.getAttribute("style"))){l=!0;break}}if(l)return void this.prerequisites()}else{l=!1;var s=!1;for(e=0;e<t.length;e++)"style"!=t[e].attributeName||"LYTE-DROP-BOX"!=t[e].target.tagName||this.isVisibilityModified(t[e].oldValue,t[e].target.getAttribute("style"))||(s=!0);for(e=0;e<t.length;e++){var a;if("attributes"!==t[e].type||"lyte-hidden"!==t[e].attributeName)if((a="childList"==t[e].type||"style"==t[e].attributeName&&"LYTE-DROP-BOX"!=t[e].target.tagName&&!t[e].target.classList.contains("lyteArrow")||"class"==t[e].attributeName&&"attributes"===t[e].type&&!t[e].target.classList.contains("lyteArrow")&&("LYTE-DROP-ITEM"!==t[e].target.tagName||!this.hasClassToggled(t[e],"lyteDropdownSelection")&&!this.hasClassToggled(t[e],"lyteMenuSelected"))||"style"===t[e].attributeName&&"LYTE-DROP-BOX"===t[e].target.tagName&&this.isVisibilityModified(t[e].oldValue,t[e].target.getAttribute("style")))&&"class"==t[e].attributeName&&"LYTE-DROP-BOX"==t[e].target.tagName){if(!s){l=!0;break}}else a&&!s&&(l=!0)}if(l)return void this.prerequisites()}this.getData("call")&&this.childComp.removeAttribute("lyte-hidden"),this.getData("call")&&this.getMethods("onShow")&&(o=!0===(o=this.getData("call"))?void 0:o,this.executeMethod("onShow",o,this)),this.setData("call",null)}}}.bind(this)),e={attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0},d.mutobserver.observe(t,e),(o=document.createElement("div")).setAttribute("class","lyteDropdownNoResult"),o.textContent=h,o.style.display="none",t.addEventListener("click",function(t){this.actions.processElements.call(this,t)}.bind(this)),m&&t.addEventListener("mouseout",function(t){this.actions.closeIt.call(this,t)}.bind(this)),(i=document.createElement("span")).setAttribute("class","lyteArrow"),t.insertBefore(i,t.children[0]),!u&&!f&&g.length>0){var S,C=g[0],L=!1;C.constructor==Object&&1==Object.keys(C).length&&(S=C[Object.keys(C)[0]]).constructor==Array&&(L=!0),this.setData("preventDisp",!0),L?"[object Object]"===Object.prototype.toString.call(S[0])?this.setData("ltPropSelected",S[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",S[0]):"[object Object]"===Object.prototype.toString.call(C)?this.setData("ltPropSelected",C[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",C),this.setData("preventDisp",!1)}else u||this.getData("ltPropSelected")||"yield"!=r||"multiple"===D||"multisearch"===D||(l=(n=d.querySelectorAll("lyte-drop-body"))[n.length-1].querySelector("lyte-drop-item"))&&(this.setData("preventDisp",!0),l.setAttribute("selected",!0),this.setData("preventDisp",!1));s=d.querySelector("[tabindex]"),b?(this.disableClickableItem(s),s.setAttribute("tabindex",-1)):(this.enableClickableItem(s),s.setAttribute("tabindex",v)),"multisearch"===D&&(this._inputElement=s,this._function=this.fireCheckKey.bind(this),s.addEventListener("keyup",this._function)),this.setData("preventDisp",!0),this.setData("changeItToInvoke",this.getData("changeItToInvoke")+1),this.setData("preventDisp",!1),w&&(this.setData("ltPropShow",!1),d.toggle(),$L.fastdom.measure(function(){s.focus();var t=d.getBoundingClientRect();(t.left<0||t.top<0)&&d.scrollIntoView()})),c=this.childComp,(p=this.getDropBody(c)).appendChild(o),p.addEventListener("scroll",function(t){this.callOnScroll(t,this)}.bind(this)),p.addEventListener("mousemove",function(t){var e=t.target,o=t.currentTarget.querySelector(".lyteDropdownSelection");e=_lyteDropdown.traverse(e,["LYTE-DROP-ITEM"]),this.hasMousePositionNotChanged(t)||e===o||(o&&o.classList.remove("lyteDropdownSelection"),e&&"LYTE-DROP-ITEM"===e.tagName&&e&&e.classList.add("lyteDropdownSelection"))}.bind(this)),g.length>0&&P&&P.length>0&&this.addDisabledClass(d.querySelectorAll("lyte-drop-item"))},hasMousePositionNotChanged:function(t){var e=t.clientX,o=t.clientY,i=this.prevClientX,l=this.prevClientY;return this.prevClientX=e,this.prevClientY=o,i===e&&l===o},tranEnd:function(t){var e=this.childComp;e.classList.remove("lyteAnimate"),e.removeEventListener("transitionend",this._transEnd),delete this._prevent},openSlideAnimate:function(){if(this.getData("ltPropAnimate")){if(this._preventSetcss)return;this._preventSetcss=!0,this._prevent=!0;var t=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),e=this.getDropBody(this.childComp);this._oriStyle=e.style.height,e.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)+this._hgt+"px"),setTimeout(function(){t.classList.add("lyteAnimate"),setTimeout(function(){-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)-this._hgt+"px"),e.style.height=this._hgt+"px",setTimeout(function(){t.addEventListener("transitionend",this._transEnd),this._hgt||this.tranEnd.call(this,{})}.bind(this),20)}.bind(this),20)}.bind(this),20)}},determine:function(t){var e,o,i,l=t.children,s=this.$node;s.querySelector("lyte-dropdown")?this.getChildren(l):(o=t.querySelector("lyte-drop-box"),(e=t.querySelector("lyte-drop-button"))&&(i=s.querySelector(".lyteDummyEventContainer"),this.setData("drophead","yield"),_lyteUiUtils.appendChild(i,e)),o&&(this.setData("dropbody","yield"),o.classList.add("lyteDropdownHidden")))},addClass:function(){this.childComp.classList.add("lyteMultiSelectDropdown")},closeDrop:function(t,e,o){_lyteDropdown.autoClosed=null,this.setData("ltPropIsOpen",!1),this._prevent||(this.getData("ltPropAnimate")?(this._prevent=!0,this._arguments=arguments,this.childComp.classList.add("lyteAnimate"),setTimeout(function(){var t=this.childComp?this.childComp:this.$node.querySelector("lyte-drop-box"),e=this.getDropBody(this.childComp);e.style.height=0,-1!=["up","upLeft","upRight"].indexOf(this.getData("pos"))&&(t.style.top=parseInt(t.style.top)+this._hgt+"px"),this._elem=e,this._box=t,e.addEventListener("transitionend",this._close),this._hgt||this.closeDrop1.call(this)}.bind(this),20)):this.closeDrop1(t,e,o))},closeDrop1:function(t,e,o){var i,l=this.$node.querySelector("lyte-drop-button"),s=this.getData("pos"),a=this.getData("multiple");this._arguments&&(t=this._arguments[0],e=this._arguments[1],o=this._arguments[2],this._elem.style.height=this._oriStyle,this._box.classList.remove("lyteAnimate"),this._elem.removeEventListener("transitionend",this._close),delete this._hgt,delete this._oriStyle,delete this._arguments,delete this._elem,delete this._box),a&&(this.getDropBody(t).scrollTop=0),t.classList.add("lyteDropdownHidden"),document.querySelector("#lytedropdownfreezelayer")&&(document.querySelector("#lytedropdownfreezelayer").style.display="none"),t.style.left="",o&&document.body.classList.remove("lyteBodyWrapper"),(i=this.removeClass(l.classList,s,"lyteDropButton",!0))&&l.classList.remove(i),this.getMethods("onHide")&&this.executeMethod("onHide",e,this),this.setData("pos",""),this.setData("savedPositions",{}),delete this._prevent,delete this._preventSetcss},callOnScroll:function(t){this.getMethods("onScroll")&&this.executeMethod("onScroll",t,this)},addDisabledClass:function(t){for(var e,o=0;o<t.length;o++)"true"==(e=t[o]).getAttribute("disabled")?e.classList.add("lyteDropdown-disabled"):e.classList.contains("lyteDropdown-disabled")&&e.classList.remove("lyteDropdown-disabled")},changeBoxClass:function(t){var e=t.oldValue;this.setBoxClass(e)}.observes("ltPropBoxClass"),noResultChanged:function(){var t=this.childComp,e=this.getData("ltPropType"),o=this.getData("drophead"),i=this.getDropBody(t).querySelector(".lyteDropdownNoResult"),l=this.getData("ltPropNoResult");t=this.childComp;i.textContent=l,l||(i.style.display="none"),t&&this.showError(t,e,o)}.observes("ltPropNoResult"),onChangeInDisabledList:function(){for(var t,e=this.childComp?this.childComp.querySelectorAll("lyte-drop-item"):this.$node.querySelectorAll("lyte-drop-item"),o=0;o<e.length;o++)t=Lyte.Component.registeredHelpers.lyteUiCheckDisabled(this.getData("ltPropDisabledList"),e[o].dataset.value),e[o].setAttribute("disabled",t),"true"===t&&e[o].classList.remove("lyteDropdownSelection");this.addDisabledClass(e)}.observes("ltPropDisabledList.[]"),removeClass:function(t,e,o,i){if(!e)return"";for(var l=0,s=t.length,a=o+(i?e[0].toUpperCase()+e.substring(1):{up:"Down",down:"Up",left:"Right",right:"Left"}[e]);l<s;l++)if(t[l]===a)return a;return""},firePosCallBack:function(){var t=this.getData("pos"),e=this.getData("widthAdjusted");if(""!==t){var o=this.childComp,i=this.$node.querySelector("lyte-drop-button"),l=this.removeClass(o.classList,t,"lyteDropdown");l&&(this._preventClass=!0,o.classList.remove(l)),o.classList.add("lyteDropdown"+t[0].toUpperCase()+t.substring(1)),(l=this.removeClass(i.classList,t,"lyteDropButton"))&&(this._preventClass=!0,i.classList.remove(l)),i.classList.add("lyteDropButton"+t[0].toUpperCase()+t.substring(1)),2===e&&o.classList.add("lyteDropdownCurve"),this.getMethods("onPositionChanged")&&this.executeMethod("onPositionChanged",t,this)}}.observes("pos","firePos"),setLeftExceedForDown:function(t,e,o,i,l){var s=o;return l+s.left+s.width-i},setLeftNotExceedForDown:function(t,e,o){return o+e.left},setTopAboveForDown:function(t,e,o,i,l){return l+o.top-i.height},setTopBelowForDown:function(t,e,o){var i=e;return o+i.top+i.height},setLeftForRight:function(t,e,o){var i=e;return o+i.left+i.width},setRightForRight:function(t,e,o,i,l){return l+o.left-i},setTopForRight:function(t,e,o){return o+e.top},setTopForRightAbove:function(t,e,o,i,l){var s=o;return l+s.top+s.height-i.height},setCorrectClass:function(t){for(var e=this.childComp.querySelector(".lyteArrow"),o=e.classList,i=0;i<o.length;i++)"lyteArrow"!=o[i]&&o[i]!=t&&(e.classList.remove(o[i]),i--);e.classList.add(t),e.classList.add("lyteArrowIcon")},hasClassToggled:function(t,e){var o=t.oldValue?t.oldValue.split(" "):[],i=t.target,l=o.length,s=i.classList.length;return!(!(~o.indexOf(e)&&!i.classList.contains(e)||!~o.indexOf(e)&&i.classList.contains(e))||1!==Math.abs(l-s))},wasVisibilityAddedOrRemoved:function(t,e){return!!~t.indexOf("visibility")&&!~e.indexOf("visibility")||!!~e.indexOf("visibility")&&!~t.indexOf("visibility")},didValueChange:function(t,e){return!!~t.indexOf("visible")&&!!~e.indexOf("hidden")||!!~t.indexOf("hidden")&&!!~e.indexOf("visible")},isVisibilityModified:function(t,e){if(t=t||"",e=e||"",this.wasVisibilityAddedOrRemoved(t,e)||this.didValueChange(t,e))return!0},adjustWidth:function(t,e,o){return this.setData("widthAdjusted",1),o>e&&this.setData("widthAdjusted",2),t.style.minWidth=e+"px",o>e?parseFloat(o):parseFloat(e)},getDropBody:function(t){var e;return(e=t?t.querySelectorAll("lyte-drop-body"):this.$node.querySelectorAll("lyte-drop-body"))[e.length-1]},toggleCurrent:function(t,e){var o="lyteDropdownSelection",i=e.querySelector("."+o);i&&i.classList.remove(o),t.classList.add(o)},scrollSel:function(){var t,e=this.getData("ltPropSelected"),o=this.childComp,i=this.getDropBody(o),l=t=i.querySelector('[data-value="'+window._lyteUiUtils.escape(e)+'"]');if(this.getData("multiple"))(t=i.querySelector("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)"))&&this.toggleCurrent(t,i);else{for(;l&&(l=l.previousElementSibling)&&("LYTE-DROP-ITEM"!==l.tagName&&"LYTE-DROP-LABEL"!==l.tagName||!_lyteDropdown.isVisible(l)););(l=l||t)&&(i.scrollTop=l.offsetTop),t&&!t.classList.contains("lyteDropdown-disabled")&&this.toggleCurrent(t,i)}},clone:function(t){var e={};for(var o in t)e[o]=t[o];return e},isFF:function(){return!!~navigator.userAgent.indexOf("Firefox")},isBodyScrollable:function(){var t=this.childComp,e=this.getDropBody(t);return e.scrollHeight>e.offsetHeight},addProperScrollbar:function(){var t=this.childComp,e=this.getDropBody(t);e.classList.contains("lyteDropdownFFScroll")||e.classList.add("lyteDropdownFFScroll"),e.classList.contains("lyteDropdownFFZeroScroll")&&e.classList.remove("lyteDropdownFFZeroScroll")},removeScrollbar:function(){var t=this.childComp,e=this.getDropBody(t);e.classList.contains("lyteDropdownFFZeroScroll")||e.classList.add("lyteDropdownFFZeroScroll"),e.classList.contains("lyteDropdownFFScroll")&&e.classList.remove("lyteDropdownFFScroll")},setCss:function(t,e){var o=this.childComp,i=this.getData("call");if(e||this.setData("savedPositions",{}),o&&!o.classList.contains("lyteDropdownHidden")){var l=this.getData("ltPropCallout"),s=o,a=this.$node.element,r=a||this.$node.querySelector("lyte-drop-button"),n=window.innerWidth,p=window.innerHeight,d=this.getData("savedPositions"),c=this.clone(s.getBoundingClientRect()),h=this.getDropBody(s).getBoundingClientRect(),y=window.pageXOffset||document.documentElement.scrollLeft,u=window.pageYOffset||document.documentElement.scrollTop,m=s.offsetHeight,f=s.offsetWidth,g=o.querySelector(".lyteArrow"),D=this.getData("ltPropPosition"),b=r.getBoundingClientRect(),v=this.isFF();this.data.ltPropAnimate&&(this._hgt=h.height,this.getDropBody(s).style.height=this._hgt+"px"),i&&(this._preventClass=!0,this.scrollSel(),t||(f=this.adjustWidth(s,b.width,f),c.width=f,l||(g.style.width=b.width+"px"))),l&&!s.classList.contains("lyteDropBodyCallout")&&s.classList.add("lyteDropBodyCallout"),v&&this.isBodyScrollable()?this.addProperScrollbar():v&&!this.isBodyScrollable()&&this.removeScrollbar();var w,P,S,C,L,x,O,_,N,T,A,E=_lyteUiUtils.getRTL();"down"===D?(w=!0,w=!(b.top+b.height+m>p&&b.top>m),P=0,b.left+b.width-f>0&&(P=1),b.left+f<=n&&(P+=2),P=E?!(1&P||!P):!(!(2&P)&&P),e&&!_lyteDropdown.isEmpty(d)?(P=d.rightPos,w=d.downPos):e&&(d.rightPos=P,d.downPos=w,this.setData("savedPositions",d)),w?l?(this.setCorrectClass("lyteArrowTop"),T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),L=this.setTopBelowForDown(r,b,u)+parseFloat(T||"0px")+"px"):s.style.top=this.setTopBelowForDown(r,b,u)+"px":l?(this.setCorrectClass("lyteArrowBottom"),T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),L=this.setTopAboveForDown(r,s,b,c,u)-parseFloat(T||"0px")+"px"):s.style.top=this.setTopAboveForDown(r,s,b,c,u)+"px",P?(l&&(A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),x=window.getComputedStyle(g,":before").marginLeft,x=Math.abs(parseFloat(x||"0px")),N=(b.width/2-A+x)/(_=f/100),g.style.left=N+"%"),s.style.top=L||s.style.top,s.style.left=this.setLeftNotExceedForDown(r,b,y)+"px"):(l&&(A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),x=window.getComputedStyle(g,":before").marginLeft,x=Math.abs(parseFloat(x||"0px")),_=f/100,N=(f-b.width/2-A+x)/_,g.style.left=N+"%"),s.style.top=L||s.style.top,s.style.left=this.setLeftExceedForDown(r,s,b,f,y)+"px"),w?this.setData("pos","down"):this.setData("pos","up")):"right"===D?(P=0,b.left-c.width>0&&(P=1),b.left+b.width+c.width<n&&(P+=2),P=E?!(1&P||!P):!(!(2&P)&&P),w=!0,w=!(b.top+c.height>p),e&&!_lyteDropdown.isEmpty(d)?(P=d.rightPos,w=d.downPos):e&&(d.rightPos=P,d.downPos=w,this.setData("savedPositions",d)),P?l?(this.setCorrectClass("lyteArrowLeft"),A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),L=this.setLeftForRight(r,b,y)+A+"px"):s.style.left=this.setLeftForRight(r,b,y)+"px":l?(this.setCorrectClass("lyteArrowRight"),A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),L=this.setRightForRight(r,s,b,f,y)-A+"px"):s.style.left=this.setRightForRight(r,s,b,f,y)+"px",w?(l&&(T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),O=window.getComputedStyle(g,":before").marginTop,O=Math.abs(parseFloat(O||"0px")),N=100*(b.height/2-T+O)/(_=c.height),g.style.top=N+"%"),s.style.left=L||s.style.left,s.style.top=this.setTopForRight(r,b,u)+"px"):(l&&(T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),O=window.getComputedStyle(g,":before").marginTop,O=Math.abs(parseFloat(O||"0px")),N=100*(c.height-b.height/2-T+O)/(_=c.height),g.style.top=N+"%"),s.style.left=L||s.style.left,s.style.top=this.setTopForRightAbove(r,s,b,c,u)+"px"),P?this.setData("pos","right"):this.setData("pos","left")):"up"===D?(S=!0,S=!(b.top-c.height<0&&b.top+b.height+m<p),P=0,b.left+b.width-f>0&&(P=1),b.left+f<=n&&(P+=2),P=E?!(1&P||!P):!(!(2&P)&&P),e&&!_lyteDropdown.isEmpty(d)?(P=d.rightPos,S=d.topPos):e&&(d.rightPos=P,d.topPos=S,this.setData("savedPositions",d)),S?l?(this.setCorrectClass("lyteArrowBottom"),T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),L=this.setTopAboveForDown(r,s,b,c,u)-T+"px"):s.style.top=this.setTopAboveForDown(r,s,b,c,u)+"px":l?(this.setCorrectClass("lyteArrowTop"),T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),L=this.setTopBelowForDown(r,b,u)+T+"px"):s.style.top=this.setTopBelowForDown(r,b,u)+"px",P?(l&&(A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),x=window.getComputedStyle(g,":before").marginLeft,x=Math.abs(parseFloat(x||"0px")),N=(b.width/2+x-A)/(_=f/100),g.style.left=N+"%"),s.style.top=L||s.style.top,s.style.left=this.setLeftNotExceedForDown(r,b,y)+"px"):(l&&(A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),x=window.getComputedStyle(g,":before").marginLeft,x=Math.abs(parseFloat(x||"0px")),_=f/100,N=(f-b.width/2+x-A)/_,g.style.left=N+"%"),s.style.top=L||s.style.top,s.style.left=this.setLeftExceedForDown(r,s,b,f,y)+"px"),S?this.setData("pos","up"):this.setData("pos","down")):"left"===D&&(C=0,b.left+b.width+f<n&&(C=1),b.left-f>0&&(C+=2),C=E?!(1&C||!C):!(!(2&C)&&C),w=!0,w=!(b.top+c.height>p),e&&!_lyteDropdown.isEmpty(d)?(C=d.leftPos,w=d.downPos):e&&(d.leftPos=C,d.downPos=w,this.setData("savedPositions",d)),C?l?(this.setCorrectClass("lyteArrowRight"),A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),L=this.setRightForRight(r,s,b,f,y)-A+"px"):s.style.left=this.setRightForRight(r,s,b,f,y)+"px":l?(this.setCorrectClass("lyteArrowLeft"),A=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),A=parseFloat(A||"0px"),L=this.setLeftForRight(r,b,y)+A+"px"):s.style.left=this.setLeftForRight(r,b,y)+"px",w?(l&&(T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),O=window.getComputedStyle(g,":before").marginTop,O=Math.abs(parseFloat(O||"0px")),N=100*(b.height/2-T+O)/(_=c.height),g.style.top=N+"%"),s.style.left=L||s.style.left,s.style.top=this.setTopForRight(r,b,u)+"px"):(l&&(T=window.getComputedStyle(g,":before").getPropertyValue("border-left-width"),T=parseFloat(T||"0px"),O=window.getComputedStyle(g,":before").marginTop,O=Math.abs(parseFloat(O||"0px")),N=100*(c.height-b.height/2-T+O)/(_=c.height),g.style.top=N+"%"),s.style.left=L||s.style.left,s.style.top=this.setTopForRightAbove(r,s,b,c,u)+"px"),C?this.setData("pos","left"):this.setData("pos","right"))}},setFreezeLayer:function(){var t=document.getElementById("lytedropdownfreezelayer");t.style.display="block",t.classList.add("lyteDropdownZIndex"),document.body.classList.add("lyteBodyWrapper")},scrollIntoView:function(t,e){var o=this.getDropBody(this.childComp),i=t.offsetTop,l=o.scrollTop,s=o.getBoundingClientRect().height,a=t.getBoundingClientRect().height;"down"===e&&l+s<i+a?o.scrollTop=o.scrollTop+i+a-(s+l):"up"===e&&i<l&&(o.scrollTop=i)},open:function(){var t,e=this,o=this.getData("ltPropType"),i=this.getData("drophead"),l=this.getData("multiple"),s=this.getData("ltPropFreeze"),a=this.getData("ltPropHover");t=this.childComp=this.$node.querySelector("lyte-drop-box"),this.hideNodes(),"multisearch"===o&&"yield"!==i&&$L(this.$node.querySelector(".lyteDropdownTextField")).search({scope:t,search:"lyte-drop-item",onSearch:function(t){for(var o=0,i=e.childComp,l=e.getDropBody(i).querySelector(".lyteDropdownNoResult"),s=e.getData("ltPropNoResult");o<t.length;o++)if(!t[o].classList.contains("lyteDropdownActive"))return void(l&&(l.style.display="none"));"none"===l.style.display&&s&&(l.style.display="block")}}),_lyteUiUtils.appendChild(document.body,t),t.origindd=this.$node,t.classList.remove("lyteDropdownHidden"),!s||l||a||this.setFreezeLayer()},hideNodes:function(){var t,e,o=this.childComp,i=0,l=this.getData("multiple"),s=this.getData("ltPropType"),a=this.getData("drophead"),r=this.getData("ltPropSelected");if(l&&r&&r.length>2){if(!o)return;try{t=JSON.parse(this.getData("ltPropSelected")||"[]")}catch(t){return void console.error("Unable to parse ltPropSelected",t)}for(;i<t.length;i++)(e=o.querySelector('[data-value="'+window._lyteUiUtils.escape(t[i])+'"]'))&&(e.classList.add("lyteDropdownActive"),this.setData("preventSel",!0),e.setAttribute("selected",!0),this.setData("preventSel",!1))}this.showError(o,s,a)},showNodes:function(t){var e,o,i,l,s=0,a=this.childComp,r=this.getDropBody(a),n=this.getData("multiple"),p=this.getData("ltPropType"),d=this.getData("drophead"),c=this.getData("allSelected"),h=t.newValue,y=t.oldValue;if(n){a&&(l=r.querySelector(".lyteDropdownNoResult"));try{h=JSON.parse(h||"[]").map(function(t){return""+t}),y=JSON.parse(y||"[]").map(function(t){return""+t})}catch(t){return void console.error("Unable to parse ltPropSelected",t)}for(o=y.length;s<o;s++)if(-1===h.indexOf(y[s])){if(a&&(i=a.querySelector('[data-value="'+window._lyteUiUtils.escape(y[s])+'"]'))&&(i.classList.remove("lyteDropdownActive"),this.setData("preventSel",!0),i.removeAttribute("selected"),this.setData("preventSel",!1)),"noyield"===d)for(e=0;e<c.length;e++)if(c[e].value===y[s]){Lyte.arrayUtils(c,"removeAt",e,1);break}l&&("multisearch"===p&&"yield"!==d||"multiple"===p)&&(l.style.display="none")}}},selObs:function(t){var e=t.oldValue;if(!this.getData("prev")){if(this.checkLimit(0))return this.setData("prev",!0),this.setData("ltPropSelected",e),void this.setData("prev",!1);this.hideNodes(),this.showNodes(t)}}.observes("ltPropSelected"),first:function(){var t=this.getData("ltPropType");this.setData("ltPropShow",!0),this.setData("ltPropIsOpen",!0),this.open(),"multisearch"===t&&this.focusInput()},subsequent:function(t,e,o,i){var l=this.getData("ltPropType");this.setData("ltPropIsOpen",!0),t.classList.remove("lyteDropdownHidden"),!e||o||i||this.setFreezeLayer(),"multisearch"===l&&this.focusInput()},beforeShow:function(t,e,o){var i,l=this,s=this.getDropBox(),a=this.getData("ltPropFreeze"),r=this.getData("multiple"),n=this.getData("ltPropHover");(i=this.executeMethod("onBeforeShow",t,this))&&i.then?(_lyteDropdown.lastDropdownWithAPromise=this.$node,this.setData("blockShowHide",!0),i.then(function(i){l.setData("blockShowHide",!1),l.isNotLastDropdownWithPromise()||(l.setData("call",!!e||t),o?l.first():l.subsequent(s,a,r,n))}).catch(function(t){l.setData("blockShowHide",!1),s.removeAttribute("lyte-hidden"),console.error(t)})):!1!==i?(l.setData("call",!!e||t),o?l.first():l.subsequent(s,a,r,n)):!1===i&&s.removeAttribute("lyte-hidden")},getDropBox:function(){var t=this.childComp;return t||(t=this.$node.querySelector("lyte-drop-box")),t},isNotLastDropdownWithPromise:function(){var t=_lyteDropdown.lastDropdownWithAPromise;return this.$node!==t},closeError:function(t,e){var o=this.getDropBody(t).querySelector(".lyteDropdownNoResult"),i=this.getData("ltPropType");o&&("yield"!==e&&"multisearch"===i||"multiple"===i)&&(o.style.display="none")},checkLimit:function(t){var e,o=this.getData("ltPropType"),i=this.getData("ltPropMaxCount"),l=this.getData("ltPropSelected");if("multiple"===o||"multisearch"===o)return e=JSON.parse(l||"[]").length+t,i>0&&e>i||void 0},findMarked:function(t,e){var o,i,l=[],s=e.length;try{t=JSON.parse(t||"[]").map(function(t){return""+t})}catch(t){console.error("Unable to parse ltPropSelected",t)}for(o=0;o<s;o++)i=t.indexOf(e[o].getAttribute("data-value")),l=l.concat(t.splice(i,1));return{removed:l,selected:t}},removeMarked:function(t,e,o,i){var l,s,a,r,n=e.length,p=this.getData("allSelected");if("noyield"==o)for(l=0;l<n;l++)for(s=0;s<p.length;s++)if(p[s].value==e[l].getAttribute("data-value")){Lyte.arrayUtils(p,"removeAt",s);break}for(a=this.getDropBody(i),l=0;l<e.length;l++)(r=a.querySelector('[data-value="'+window._lyteUiUtils.escape(e[l].getAttribute("data-value"))+'"]'))&&(r.classList.remove("lyteDropdownActive"),r.classList.remove("lyteSearchHidden"),r.removeAttribute("selected"));this.setData("prev",!0),this.setData("ltPropSelected",JSON.stringify(t)),this.setData("prev",!1)},removeAll:function(t){var e,o,i=this.$node,l=this.childComp,s=this.getData("drophead"),a=i.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark"),r=this.getData("ltPropSelected"),n=this.getData("ltPropSelected");o=this.findMarked(n,a),e=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(t,o.removed,e,a)?t.stopPropagation():(this.removeMarked(o.selected,a,s,l),this.closeError(l,s),this.getMethods("onRemove")&&this.executeMethod("onRemove",t,o.removed,this.getData("ltPropSelected"),this,e,a),this.fireOnChange(r,t,a),t.stopPropagation())},hasClassToggled:function(t,e){var o=t.oldValue?t.oldValue.split(" "):[],i=t.target,l=o.length,s=i.classList.length;return!(!(~o.indexOf(e)&&!i.classList.contains(e)||!~o.indexOf(e)&&i.classList.contains(e))||1!==Math.abs(l-s))},relativePosition:function(t,e){var o=t;if(1===e.length&&e[0]===t)return!0;for(;o=o.previousElementSibling;)if(o.getAttribute("lyte-last"))return!0;return!1},shade:function(t){var e,o=this.$node.querySelector("lyte-drop-button").querySelectorAll(".lyteDropMark");if(!(o.length>1&&t.classList.contains("lyteDropMark"))){e=0===o.length||this.relativePosition(t,o)?"previousElementSibling":"nextElementSibling";do{t.classList.add("lyteDropMark")}while((t=t[e])&&!t.getAttribute("lyte-last"))}},fireCheckKey:function(){this.$node.constructor._actions.checkKey.call(this,event)},fireOnChange:function(t,e,o){var i=this.getData("ltPropSelected");this.hasValueChanged(t)&&this.getMethods("onChange")&&this.executeMethod("onChange",e,i,this,o)},hasValueChanged:function(t){var e=this.getData("ltPropSelected");return this.getData("multiple")?(t=this.stringifyALS(t))!==(e=this.stringifyALS(e)):t!==e},stringifyALS:function(t){return t=t||"[]",t=JSON.parse(t).map(function(t){return""+t}),JSON.stringify(t)},mark:function(t,e,o){e?(_lyteDropdown.unmark(this),this.shade(t)):o?(_lyteDropdown.unmark(this),t.classList.add("lyteDropMark")):(_lyteDropdown.unmark(),t.classList.add("lyteDropMark")),this.setLast(t)},beforeSelect:function(t,e){var o=this.getData("ltPropSelected"),i=!0,l=e.getAttribute("data-value");return this.getMethods("beforeSelect")&&(i=!1!==(i=this.executeMethod("beforeSelect",t,o,this,e,l))),i},focusInput:function(){var t;window._lyteUiUtils.isMobile?(t=this.$node.querySelector("input"))&&t.focus():$L.fastdom.measure(function(){var t=this.$node.querySelector("input");t&&t.focus()},this)},showError:function(t,e,o){var i,l=this.getDropBody(t),s=l.querySelectorAll("lyte-drop-item:not(.lyteDropdownActive):not(.lyteSearchHidden)");this.getData("ltPropNoResult")&&0===s.length&&(i=l.querySelector(".lyteDropdownNoResult"))&&("multisearch"===e&&"yield"!==o||"multiple"===e)&&(i.style.display="block")},beforeRemove:function(t,e,o,i){var l;return this.getMethods("onBeforeRemove")&&(l=0==(l=this.executeMethod("onBeforeRemove",t,e,this.getData("ltPropSelected"),this,o,i))),l},beforeAdd:function(t,e,o){var i;return this.getMethods("onBeforeAdd")&&(i=0==(i=this.executeMethod("onBeforeAdd",t,o,this.getData("ltPropSelected"),this,e))),i},beforeHide:function(t,e,o){var i=!1;if(this.getMethods("onBeforeHide")){if((i=this.executeMethod("onBeforeHide",e,this))&&i.then)return i.then(function(){this.closeDrop(t,e,o)}.bind(this,t,e,o)).catch(function(t){console.error(t)}),!0;i=0==i}return i},setHighlight:function(t,e){for(var o,i,l=0;l<t.length&&!t[l].classList.contains("lyteDropdownSelection");l++);t[l]&&t[l]===e&&(i=o=l,(l=_lyteDropdown.find(t,l+1,!0))!=t.length?t[l].classList.add("lyteDropdownSelection"):-1!=(o=_lyteDropdown.find(t,o-1,!1))&&t[o].classList.add("lyteDropdownSelection"),t[i].classList.remove("lyteDropdownSelection"))},setLast:function(t){var e=document.querySelector('[lyte-last="true"]');e&&e.removeAttribute("lyte-last"),t.setAttribute("lyte-last",!0)},optCall:function(t,e,o){this.getMethods("onOptionSelected")&&this.executeMethod("onOptionSelected",t,e,this,o)},setInitialSelected:function(){var t,e=this.getData("ltPropOptions")[0],o=!1;e.constructor==Object&&1==Object.keys(e).length&&(t=e[Object.keys(e)[0]]).constructor==Array&&(o=!0),o?"[object Object]"===Object.prototype.toString.call(t[0])?this.setData("ltPropSelected",t[0][this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",t[0]):"[object Object]"===Object.prototype.toString.call(e)?this.setData("ltPropSelected",e[this.getData("ltPropSystemValue")]):this.setData("ltPropSelected",e)},contentChange:function(t){var e=t.oldValue,o=t.newValue,i=this.getData("ltPropSelected"),l=this.getData("ltPropPlaceholder"),s=(this.getData("ltPropDisplayValue"),"yield"===this.getData("dropbody"));!((e&&0===e.length||!e)&&o&&o.length>0)||i||l||s||this.setInitialSelected()}.observes("ltPropOptions"),hideOptionsBasedOnSelected:function(){var t=this.childComp,e=this.getData("drophead"),o=this.getData("multiple"),i=this.getData("ltPropType");t&&o&&(this.hideNodes(),this.closeError(t,e),this.showError(t,i,e))}.observes("ltPropOptions"),selChange:function(){var t,e,o,i,l,s,a,r=this.getData("multiple"),n=this.getData("drophead"),p=this.childComp,d=this.getData("ltPropDisplayValue"),c=this.getData("preventDisp"),h=this.getData("ltPropSelected"),y=(d=this.getData("ltPropDisplayValue"),c=this.getData("preventDisp"),p||this.$node.querySelector("lyte-drop-box")),u=this.getDropBody(y),m=0,f=0;if(r&&"yield"!==n){if(!h)return;try{o=JSON.parse(h||"[]")}catch(t){return void console.error("Could not parse ltPropSelected",t)}for(i=this.getData("allSelected");m<o.length;m++){for(s=!0,f=0;f<i.length;f++)if(o[m]==i[f].value){s=!1;break}if(s){if(a=y.querySelector('[data-value="'+window._lyteUiUtils.escape(o[m])+'"]'),!(l={value:o[m],display:(a||{}).textContent}).display)continue;Lyte.arrayUtils(this.getData("allSelected"),"push",l)}}}else if(!r){for((e=y.querySelector('[data-value="'+window._lyteUiUtils.escape(h)+'"]'))&&this.toggleCurrent(e,u),t=y.querySelectorAll("[selected]");m<t.length;m++)t[m].getAttribute("data-value")!=h&&t[m].removeAttribute("selected");if("yield"!==n)if(e){var g=e.textContent;(d&&!c||!d)&&this.setData("ltPropDisplayValue",(g||"").trim())}else h||c||this.setData("ltPropDisplayValue","")}e&&e.setAttribute("selected","true")}.observes("ltPropOptions","ltPropSelected","changeItToInvoke"),tabIndexChange:function(){var t=this.getData("ltPropDisabled"),e=this.$node.querySelector("[tabindex]"),o=this.getData("ltPropTabindex");t?(this.disableClickableItem(e),e.tabIndex=-1):(this.enableClickableItem(e),e.tabIndex=o)}.observes("ltPropDisabled"),disableClickableItem:function(t){var e=this.getData("ltPropType"),o=this.getData("drophead");"multisearch"===e&&"noyield"===o&&(t=this.getClickableItem(t)),t&&t.classList&&t.classList.add("lyteDropdown-disabled")},enableClickableItem:function(t){var e=this.getData("ltPropType"),o=this.getData("drophead");"multisearch"===e&&"noyield"===o&&(t=this.getClickableItem(t)),t&&t.classList&&t.classList.remove("lyteDropdown-disabled")},getClickableItem:function(t){return _lyteDropdown.traverse(t,["HTML","LYTE-DROP-BUTTON"])},focusDropdown:function(){var t=this.$node.querySelector("[tabindex]"),e=this.getData("ltPropFocus"),o=this.getData("search");e&&(!o&&t?t.focus():o&&this.$node.open()),this.data.ltPropFocus=!1}.observes("ltPropFocus").on("didConnect"),data:function(){return{changeItToInvoke:Lyte.attr("number",{default:1}),dummy1:Lyte.attr("boolean",{default:!0}),dummy2:Lyte.attr("boolean",{default:!1}),savedPositions:Lyte.attr("object",{default:{}}),ltPropRemoveMultiple:Lyte.attr("boolean",{default:!1}),ltPropYield:Lyte.attr("boolean",{default:!1}),ltPropType:Lyte.attr("string",{default:"default"}),ltPropTabindex:Lyte.attr("number",{default:0}),ltPropShow:Lyte.attr("boolean",{default:!1}),ltPropFreeze:Lyte.attr("boolean",{default:!0}),ltPropOptions:Lyte.attr("array",{default:[]}),ltPropUserValue:Lyte.attr("string",{default:void 0}),ltPropSystemValue:Lyte.attr("string",{default:void 0}),ltPropPosition:Lyte.attr("string",{default:"down"}),ltPropIconClass:Lyte.attr("string",{default:"dropdown"}),ltPropSelected:Lyte.attr("string",{default:""}),ltPropCallout:Lyte.attr("boolean",{default:!1}),ltPropPlaceholder:Lyte.attr("string",{default:""}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropHover:Lyte.attr("boolean",{default:!1}),ltPropNoResult:Lyte.attr("string",{default:_lyteUiUtils.i18n("no.results.found")}),ltPropMaxCount:Lyte.attr("number",{default:0}),ltPropInputClass:Lyte.attr("string",{default:"lyteSearch"}),allSelected:Lyte.attr("array",{default:[]}),ltPropBoundary:Lyte.attr("object",{default:{}}),pos:Lyte.attr("string",{default:""}),firePos:Lyte.attr("number",{default:1}),ltPropAjaxRequest:Lyte.attr("object",{default:{}}),firstRequest:Lyte.attr("boolean",{default:!0}),ltPropDisplayValue:Lyte.attr("string",{default:"",hideAttr:!0}),ltPropDisabledList:Lyte.attr("array",{default:[]}),ltPropAnimate:Lyte.attr("boolean",{default:!1}),ltPropSetPos:Lyte.attr("boolean",{default:!1}),ltPropTooltip:Lyte.attr("object",{default:{position:"bottom",appearance:"box",margin:5,keeptooltip:!0}}),ltPropBoxClass:Lyte.attr("string",{default:""}),ltPropIsOpen:Lyte.attr("boolean",{default:!1}),ltPropFixPositionOnOpen:Lyte.attr("boolean",{default:!1})}},actions:{toolTipConfig:function(t){var e=t.offsetWidth,o=t.scrollWidth,i=this.getData("ltPropTooltip");this.setData("showToolTip",e<o&&!_lyteDropdown.isEmpty(i))},preventDefault:function(t){13===t.keyCode&&t.preventDefault()},closeIt:function(t){var e=t.clientX,o=t.clientY,i=this.$node.querySelector("lyte-drop-button"),l=i.getBoundingClientRect().top,s=i.getBoundingClientRect().height,a=i.getBoundingClientRect().left,r=i.getBoundingClientRect().width,n=this.childComp,p=n.getBoundingClientRect().top,d=n.getBoundingClientRect().height,c=n.getBoundingClientRect().left,h=n.getBoundingClientRect().width;e>Math.floor(a)&&e<Math.floor(a+r)&&o>Math.floor(l)&&o<Math.floor(l+s)||e>Math.floor(c)&&e<Math.floor(c+h)&&o>Math.floor(p)&&o<Math.floor(p+d)||this.$node.toggle(t,"leave")},processElements:function(t){var e,o,i,l=this.childComp,s=t.target,a=this.getData("multiple"),r=this.getData("drophead"),n=this.getData("ltPropFreeze"),p=this.getData("ltPropType"),d=this.getDropBody(l),c=this.getData("search"),h=this.getData("ltPropSelected");if(c&&(i=this.$node.querySelector("lyte-search")||this.$node.querySelector("input"),this.focusInput()),(s=_lyteDropdown.traverse(s,["HTML","LYTE-DROP-ITEM"]))&&"HTML"!==s.tagName)if(a||"yield"===r)if(a){if(this.checkLimit(1))return;if(o=s.getAttribute("data-value"),this.getMethods("onBeforeAdd")&&this.beforeAdd(t,s,o))return;c&&i.setValue&&i.setValue(""),e=l.querySelectorAll("lyte-drop-item"),this.setHighlight(e,s),this.setData("prev",!0),s.setAttribute("selected","true"),this.setData("prev",!1),s.classList.add("lyteDropdownActive"),this.getMethods("onAdd")&&this.executeMethod("onAdd",t,o,this.getData("ltPropSelected"),this,s),this.showError(l,p,r),this.fireOnChange(h,t,s)}else{if(!this.beforeSelect(t,s))return;if(this.toggleCurrent(s,d),this.setData("ltPropSelected",s.getAttribute("data-value")),this.optCall(t,this.getData("ltPropSelected"),s),this.fireOnChange(h,t,s),this.beforeHide.call(this,l,t,n))return;this.closeDrop(l,t,n)}else{if(!this.beforeSelect(t,s))return;if(s.setAttribute("selected","true"),this.optCall(t,this.getData("ltPropSelected"),s),this.fireOnChange(h,t,s),this.beforeHide.call(this,l,t,n))return;this.toggleCurrent(s,d),this.closeDrop(l,t,n)}},closeFun:function(t){for(var e,o,i,l=this.childComp,s=this.getData("drophead"),a=this.getData("ltPropRemoveMultiple"),r=this.getData("ltPropSelected"),n=t.target,p=this.getData("ltPropSelected");!n.getAttribute("data-value")&&n;)n=n.parentElement;n&&(e=n.getAttribute("data-value"),o=this.getData("isKeyDown")?"keydown":"click",this.beforeRemove(t,a?[e]:e,o,a?[n]:n)?t.stopPropagation():(this.closeError(l,s),i=this.findMarked(p,[n]),this.removeMarked(i.selected,[n],s,l),this.getMethods("onRemove")&&this.executeMethod("onRemove",t,a?[e]:e,this.getData("ltPropSelected"),this,o,a?[n]:n),this.fireOnChange(r,t,a?[n]:n),t.stopPropagation()))},checkKey:function(t){var e=this.getData("ltPropType");9==t.keyCode&&(this.$node.constructor._actions.showHide.call(this,t,t.type),"multisearch"==e&&this.focusInput())},showHide:function(t,e,o){var i,l=this.childComp,s=this.getData("ltPropFreeze"),a=this.getData("multiple"),r=this.getData("ltPropType"),n=this.getData("ltPropHover"),p=this.getData("ltPropRemoveMultiple"),d=this.getData("ltPropShow");if(!this.getData("blockShowHide")){if(_lyteDropdown.autoClosed=null,p&&t&&a){for(i=t.target;i&&"LYTE-DROPDOWN"!==i.tagName&&!i.getAttribute("data-value");)i=i.parentNode;if(i&&i.getAttribute("data-value"))return void this.mark(i,t.shiftKey,t.ctrlKey||t.metaKey);_lyteDropdown.unmark()}else _lyteDropdown.unmark();if("enter"==e){if(l&&!l.classList.contains("lyteDropdownHidden"))return;this.$node.querySelector("[tabindex]").focus()}if("leave"!=e||!l||!l.classList.contains("lyteDropdownHidden"))if(d)if(l&&l.classList.contains("lyteDropdownHidden"))l.setAttribute("lyte-hidden",""),this.getMethods("onBeforeShow")?this.beforeShow(t,o,!1):(this.setData("call",!!o||t),this.subsequent(l,s,a,n));else if(!l||!o&&a)l&&"multisearch"===r&&this.focusInput();else{if(this.beforeHide.call(this,l,t,s))return;this.closeDrop(l,t,s)}else l||(this.childComp=this.$node.querySelector("lyte-drop-box")),this.childComp&&this.childComp.setAttribute("lyte-hidden",""),this.getMethods("onBeforeShow")?this.beforeShow(t,o,!0):(this.setData("call",!!o||t),this.first()),a&&this.addClass()}}}}),window.addEventListener("scroll",function(t){$L.fastdom.measure(function(){var e,o,i,l,s,a,r=_lyteDropdown.getVisibleDropbox(),n=t.target;if(r){for(;n!=document&&"LYTE-DROP-BOX"!==n.tagName&&"HTML"!==n.tagName;)n=n.parentElement;if("LYTE-DROP-BOX"!==n.tagName)if(o=r.origindd){if(s=(i=o.component).childComp,a=_lyteDropdown.buildBounds(i),(l=o.getBoundingClientRect()).top<a.top||l.left<a.left||l.right>a.right||l.bottom>a.bottom){if(i.beforeHide.call(i,s,t,i.getData("ltPropFreeze")))return;i.closeDrop.call(i,s,t,i.getData("ltPropFreeze")),_lyteDropdown.autoClosed=o}o.component._preventSetcss||(e=o.component.getData("ltPropFixPositionOnOpen"),o.component.setCss(!0,e))}else _lyteDropdown.openAutoClosedDropdown(n)}else _lyteDropdown.openAutoClosedDropdown(n)})},!0),document.addEventListener("click",function(t){var e,o,i,l,s,a,r,n,p,d,c=t.target,h=t.target,y=0,u=0;if(_lyteDropdown.isScrollBar(h)||(_lyteDropdown.autoClosed=null),c=_lyteDropdown.traverse(c,["LYTE-DROPDOWN","HTML","LYTE-DROP-BOX","LYTE-DROP-REMOVE"]),_lyteDropdown.focusOut&&(_lyteDropdown.preventClose=!(!c||"HTML"===c.tagName)),c)if("HTML"==c.tagName){for(_lyteDropdown.unmark(),l=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");u<l.length;u++)if(s=l[u]){if((a=s.origindd.component).beforeHide.call(a,s,t,a.getData("ltPropFreeze")))continue;r=document.getElementById("lytedropdownfreezelayer"),a.closeDrop.call(a,s,t,r)}(d=document.activeElement)&&"INPUT"===d.tagName&&_lyteDropdown.traverse(d,["LYTE-DROPDOWN"])&&d.blur()}else if("LYTE-DROPDOWN"===c.tagName)for(e=c,o=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");y<o.length;y++)o[y].origindd!=e&&(a=(n=o[y].origindd).component,_lyteDropdown.unmark(),a.beforeHide.call(a,a.childComp,t,a.getData("ltPropFreeze"))||a.closeDrop.call(a,a.childComp,t,a.getData("ltPropFreeze")));else if("LYTE-DROP-REMOVE"===c.tagName){for(n=c;"LYTE-DROPDOWN"!=n.tagName;)n.getAttribute("data-value")&&(p=n),n=n.parentElement;i=n.ltProp("type"),n.component.getData("drophead"),"multisearch"===i&&n.component.focusInput(),p.classList.contains("lyteDropMark")?n.component.removeAll(t):(_lyteDropdown.unmark(),n.component.actions.closeFun.call(n.component,t))}},!0),window._lyteUiUtils.isIos&&document.addEventListener("focusout",function(t){var e,o,i,l,s=t.target;(o=_lyteDropdown.traverse(s,"LYTE-DROPDOWN"))&&"INPUT"===t.target.tagName&&(i=o.component,e=i.childComp,l=i.getData("ltPropFreeze"),_lyteDropdown.focusOut=!0,setTimeout(function(){if(_lyteDropdown.preventClose)_lyteDropdown.preventClose=_lyteDropdown.focusOut=!1;else{if(e&&!e.classList.contains("lyteDropdownHidden")){if(i.beforeHide(e,t,l))return;i.closeDrop(e,t,l)}_lyteDropdown.focusOut=!1}},0))},!0),document.addEventListener("keydown",function(t){var e,o,i,l,s,a,r,n,p,d,c,h,y=t.keyCode,u=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)"),m=0;if(32!==y&&13!==y||(l=document.activeElement,!(l=_lyteDropdown.traverse(l,["LYTE-DROPDOWN","HTML","INPUT"]))||("LYTE-DROPDOWN"===l.tagName&&t.preventDefault(),"LYTE-DROPDOWN"!==l.tagName||u&&l===u.origindd)))if(38!=y&&40!=y&&13!=y||!u){if(8===y){if((e=_lyteDropdown.getActive())&&(o=e.component,i=e.querySelector("lyte-drop-button").querySelector(".lyteDropMark")),!(a=_lyteDropdown.getDropdownWithFocusedInput()))return;s=(r=a&&a.component)&&r.getData("ltPropType"),i?(t.preventDefault(),o.setData("isKeyDown",!0),o.removeAll(t),o.setData("isKeyDown",!1)):a&&"multisearch"===s&&_lyteDropdown.isInput(t)&&(n=a.querySelectorAll("lyte-drop-remove")).length>0&&(a.component.setData("isKeyDown",!0),n[n.length-1].click(),a.component.setData("isKeyDown",!1))}else if((27===y||9===y)&&u){if(!(u=_lyteDropdown.traverse(u,["LYTE-DROP-BOX"])))return;if((r=u.origindd.component).beforeHide.call(r,r.childComp,t,r.getData("ltPropFreeze")))return;r.closeDrop.call(r,r.childComp,t,r.getData("ltPropFreeze"))}}else{if(38!=y&&40!=y||t.preventDefault(),s=(r=(a=u.origindd).component).getData("ltPropType"),!(p=(u=r.getDropBody(u)).querySelector(".lyteDropdownSelection"))||p&&!_lyteDropdown.isVisible(p)){for(c=u.querySelectorAll("lyte-drop-item:not(.lyteSearchHidden):not(.lyteDropdownActive)");m<c.length;m++)if(_lyteDropdown.isVisible(c[m])&&"true"!==c[m].getAttribute("disabled")){d=c[m];break}if(p&&p.classList.remove("lyteDropdownSelection"),d)return void d.classList.add("lyteDropdownSelection")}for(y=t.keyCode,c=u.querySelectorAll("lyte-drop-item"),m=0;m<c.length&&!c[m].classList.contains("lyteDropdownSelection");m++);if(13==y)if(r.getData("multiple")){if(!c[m])return;c[m].click()}else c[m]&&c[m].click();else 38==y&&0!=m?(h=m,-1!=(m=_lyteDropdown.find(c,m-1,!1))&&(r.scrollIntoView(c[m],"up"),c[h].classList.remove("lyteDropdownSelection"),c[m].classList.add("lyteDropdownSelection"))):40==y&&m!=c.length-1&&(h=m,(m=_lyteDropdown.find(c,m+1,!0))<c.length&&(r.scrollIntoView(c[m],"down"),c[h].classList.remove("lyteDropdownSelection"),c[m].classList.add("lyteDropdownSelection")))}else l.constructor._actions.showHide.call(l.component,t,t.type)}),document.addEventListener("keypress",function(t){var e,o,i,l=t.which||t.keyCode,s=0,a=document.querySelectorAll("lyte-drop-box:not(.lyteDropdownHidden)");if(a.length>0&&(l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57)&&(_lyteDropdown.pressedCharacter=_lyteDropdown.pressedCharacter?_lyteDropdown.pressedCharacter+=String.fromCharCode(l):String.fromCharCode(l),_lyteDropdown.checkDDtimeoutId&&clearTimeout(_lyteDropdown.checkDDtimeoutId),_lyteDropdown.checkDDtimeoutId=setTimeout(function(){_lyteDropdown.pressedCharacter=null},500),i="LYTE-DROPDOWN"==((i=(document.activeElement||{}).parentElement)||{}).tagName?i:null,a.length>0&&i)){for(s=0;s<a.length&&a[s].origindd!=i;s++);if(i=(a=a[s]).origindd,e=a.querySelectorAll("lyte-drop-item"),_lyteDropdown.cachePreviousVal.char&&_lyteDropdown.cachePreviousVal.char==_lyteDropdown.pressedCharacter&&_lyteDropdown.cachePreviousVal.pos+1<e.length&&e[_lyteDropdown.cachePreviousVal.pos+1].textContent.substring(0,_lyteDropdown.pressedCharacter.length).toLowerCase()===_lyteDropdown.pressedCharacter.toLowerCase())o=_lyteDropdown.cachePreviousVal.pos+1;else for(s=0;s<e.length;s++)if(e[s].textContent.substring(0,_lyteDropdown.pressedCharacter.length).toLowerCase()===_lyteDropdown.pressedCharacter.toLowerCase()){o=s;break}if(void 0!=o){for(var r=a.querySelectorAll(".lyteDropdownSelection"),n=0;n<r.length;n++)r[n].classList.remove("lyteDropdownSelection");e[o].classList.add("lyteDropdownSelection");var p=a.querySelector("lyte-drop-body");p.scrollTop+=parseInt(e[o].getBoundingClientRect().top-p.getBoundingClientRect().top)}_lyteDropdown.cachePreviousVal.char=_lyteDropdown.pressedCharacter,_lyteDropdown.cachePreviousVal.pos=o}}),window._lyteUiUtils.isMobile||window.addEventListener("resize",function(t){delete this._hgt,_lyteDropdown.autoClosed=null;var e,o=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)");o&&!o.origindd.component._preventSetcss&&(e=o.origindd.component.getData("ltPropFixPositionOnOpen"),o.origindd.component.setCss(!0,e))}),_lyteUiUtils.registeredCustomElements["lyte-drop-item"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-item"]=!0,Lyte.createCustomElement("lyte-drop-item",{static:{observedAttributes:{get:function(){return["selected"]}}},attributeChangedCallback:function(t,e,o,i){var l,s,a,r,n,p=this,d=this.getAttribute("data-value");if("selected"==t&&this.hasAttribute("selected")){if(!(p=_lyteDropdown.traverse(p,["LYTE-DROP-BOX","BODY"]))||"HTML"==p.tagName)return;if((l=p.origindd)||(l=p=_lyteDropdown.traverse(p,["LYTE-DROPDOWN","BODY"])),(s=l.component).getData("preventSel"))return;"multiple"==(a=s.getData("ltPropType"))||"multisearch"==a?(r=s.getData("ltPropSelected"))&&2==r.length||!r?(r=JSON.stringify([d]),s.setData("ltPropSelected",r)):((n=JSON.parse(r)).push(d),s.setData("ltPropSelected",JSON.stringify(n))):s.setData("ltPropSelected",d)}}})),_lyteDropdown={lastDropdownWithAPromise:null,preventClose:!1,autoClosed:null,focusOut:!1,getDropdownWithFocusedInput:function(){var t,e=document.activeElement;if(e&&"input"===e.nodeName.toLowerCase()&&(t=_lyteDropdown.traverse(e,["HTML","LYTE-DROPDOWN"])),t&&"lyte-dropdown"===t.nodeName.toLowerCase())return t},getVisibleDropbox:function(){for(var t=(document.body||{}).children||[],e=0;e<t.length;e++)if("LYTE-DROP-BOX"===t[e].tagName&&_lyteDropdown.isVisible(t[e]))return t[e]},isScrollBar:function(t){return t&&(t.classList.contains("lyteScrollContainer")||t.classList.contains("lyteScrollDiv"))},isInBounds:function(t,e){return t.top<e.top&&t.bottom>e.bottom&&t.left<e.left&&t.right>e.right},buildVisibleBounds:function(t,e,o){return{top:e?0:Math.max(t.top,0),left:e?0:Math.max(t.left,0),right:e?window.innerWidth:Math.min(window.innerWidth,t.left+o.offsetWidth),bottom:e?window.innerHeight:Math.min(window.innerHeight,t.top+o.offsetHeight)}},openAutoClosedDropdown:function(t){var e,o,i,l=t===document,s=_lyteDropdown.autoClosed;s&&(e=l?{}:t.getBoundingClientRect(),o=_lyteDropdown.buildVisibleBounds(e,l,t),i=s.component.childComp,s&&t.contains(s)&&_lyteDropdown.isInBounds(o,s.getBoundingClientRect())&&i.classList.contains("lyteDropdownHidden")&&(s.toggle(),_lyteDropdown.autoClosed=null))},isEmpty:function(t){for(var e in t)return!1;return!0},buildBounds:function(t){var e=t.getData("ltPropBoundary");return{left:e.left||0,right:e.right||window.innerWidth,top:e.top||0,bottom:e.bottom||window.innerHeight}},traverse:function(t,e){for(;t&&!~e.indexOf(t.tagName);)t=t.parentNode;return t},find:function(t,e,o){for(var i=o?1:-1,l=t.length;o?e<l:e>-1;e+=i)if(_lyteDropdown.isVisible(t[e])&&"true"!==t[e].getAttribute("disabled"))return e;return o?l:-1},isVisible:function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pressedCharacter:null,checkDDtimeoutId:null,cachePreviousVal:{},isInput:function(t){var e=t.target;return!(!(e=_lyteDropdown.traverse(e,["LYTE-DROPDOWN"]))||"INPUT"!==t.target.tagName||"text"!==t.target.type||t.target.value)},unmark:function(t){for(var e,o=document.querySelectorAll(".lyteDropMark"),i=0,l=o.length;i<l;i++)(e=t?_lyteDropdown.findParent(o[i]):void 0)&&e==t.$node||o[i].classList.remove("lyteDropMark")},findParent:function(t){return t=_lyteDropdown.traverse(t,["LYTE-DROPDOWN"])},getActive:function(){var t=document.querySelector(".lyteDropMark");return _lyteDropdown.findParent(t)}},_lyteUiUtils.registeredCustomElements["lyte-drop-group"]||(_lyteUiUtils.registeredCustomElements["lyte-drop-group"]=!0,Lyte.createCustomElement("lyte-drop-group",{static:{observedAttributes:{get:function(){return["label"]}}},attributeChangedCallback:function(t,e,o,i){var l,s;"label"==t&&(l=this.querySelector("lyte-drop-label"),s=this.getAttribute("label"),l?l.textContent=s:((l=document.createElement("lyte-drop-label")).textContent=s,this.insertBefore(l,this.children[0])))}}));