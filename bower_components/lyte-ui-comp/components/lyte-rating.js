Lyte.Component.register("lyte-rating",{_template:'<template tag-name="lyte-rating" class="{{lyteUiAddClassRating(ltPropWrapperClass,ltPropReadOnly)}}">\n\t<template is="if" value="{{ltPropYield}}"><template case="true">\n\t\t<lyte-yield yield-name="rateIcon"></lyte-yield>\n\t</template><template case="false"><template is="if" value="{{expHandlers(ifNotEquals(ltPropAppearance,\'smiley\'),\'&amp;&amp;\',lyteUiIfEqualsAny(ltPropType,\'switch\',\'multiple\'))}}"><template case="true">\n\t\t<template is="for" items="{{countArray}}" item="item" index="index">\n\t\t<lyte-rate-icon class="{{lyteUiGetArrayValueByIndex(emptyIconArray,index)}}" data-lrc="{{item}}"></lyte-rate-icon>\n\t\t</template>\n\t</template><template case="false">\n\t\t<template is="for" items="{{countArray}}" item="item" index="index">\n\t\t<lyte-rate-icon class="{{ltPropEmptyIcon}}" data-lrc="{{item}}"></lyte-rate-icon>\n\t\t</template>\n\t</template></template></template></template>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}]},false:{dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1]},{type:"componentDynamic",position:[1]}]}]}},default:{}}]}},default:{}}],_templateAttributes:{type:"attr",position:[]},_observedAttributes:["ltPropValue","ltPropCount","ltPropWrapperClass","ltPropType","ltPropAppearance","ltPropReadOnly","ltPropClearable","ltPropHalfIncrement","ltPropEmptyIcon","ltPropFullIcon","ltPropHalfIcon","ltPropHoverFullIcon","ltPropHoverHalfIcon","ltPropYield","countArray","currentHover","emptyIconArray","fullIconArray","halfIconArray","hoverFullIconArray","hoverHalfIconArray"],data:function(){return{ltPropValue:Lyte.attr("number",{default:0}),ltPropCount:Lyte.attr("number",{default:5}),ltPropWrapperClass:Lyte.attr("string"),ltPropType:Lyte.attr("string",{default:"default"}),ltPropAppearance:Lyte.attr("string"),ltPropReadOnly:Lyte.attr("boolean",{default:!1}),ltPropClearable:Lyte.attr("boolean",{default:!1}),ltPropHalfIncrement:Lyte.attr("boolean",{default:!1}),ltPropEmptyIcon:Lyte.attr("string",{default:"lyteDummyRC"}),ltPropFullIcon:Lyte.attr("string",{default:"lyteDummyRC"}),ltPropHalfIcon:Lyte.attr("string",{default:"lyteDummyRC"}),ltPropHoverFullIcon:Lyte.attr("string",{default:"lyteDummyRC"}),ltPropHoverHalfIcon:Lyte.attr("string",{default:"lyteDummyRC"}),ltPropYield:Lyte.attr("boolean",{default:!1}),countArray:Lyte.attr("array",{default:[]}),currentHover:Lyte.attr("number",{default:0}),emptyIconArray:Lyte.attr("array",{default:[]}),fullIconArray:Lyte.attr("array",{default:[]}),halfIconArray:Lyte.attr("array",{default:[]}),hoverFullIconArray:Lyte.attr("array",{default:[]}),hoverHalfIconArray:Lyte.attr("array",{default:[]})}},initFn:function(){if(this.$node.classList.remove("heart","lineHeart","star","lineStar","custom","lyteRatingSmiley","three","five"),"multiple"==this.getData("ltPropType"))if("custom"==this.getData("ltPropAppearance")){var t=this.getData("ltPropEmptyIcon").split(","),e=this.getData("ltPropFullIcon").split(","),a=this.getData("ltPropHoverFullIcon").split(",");if(this.getData("ltPropHalfIncrement")){var l=this.getData("ltPropHalfIcon").split(","),r=this.getData("ltPropHoverHalfIcon").split(",");this.setData("halfIconArray",l),this.setData("hoverHalfIconArray",r)}this.setData("emptyIconArray",t),this.setData("fullIconArray",e),this.setData("hoverFullIconArray",a)}else this.setData("ltPropAppearance","smiley"),this.$node.classList.add("lyteRatingSmiley"),3==this.getData("ltPropCount")?this.$node.classList.add("three"):(this.setData("ltPropCount",5),this.$node.classList.add("five")),this.setData("ltPropEmptyIcon","lyteRatingEmpty"),this.setData("ltPropFullIcon","lyteRatingFilled"),this.setData("ltPropHoverFullIcon","lyteRatingHover"),this.setData("ltPropHalfIncrement",!1);else if("switch"==this.getData("ltPropType")){if("custom"==this.getData("ltPropAppearance")){t=this.getData("ltPropEmptyIcon").split(","),e=this.getData("ltPropFullIcon").split(","),a=this.getData("ltPropHoverFullIcon").split(",");this.setData("emptyIconArray",t),this.setData("fullIconArray",e),this.setData("hoverFullIconArray",a)}else{this.setData("ltPropAppearance","likeDislike"),this.setData("ltPropEmptyIcon","lrcSwitchLikeEmpty,lrcSwitchDislikeEmpty"),this.setData("ltPropFullIcon","lrcSwitchLike,lrcSwitchDislike"),this.setData("ltPropHoverFullIcon","lrcSwitchHoverLike,lrcSwitchHoverDislike");t=this.getData("ltPropEmptyIcon").split(","),e=this.getData("ltPropFullIcon").split(","),a=this.getData("ltPropHoverFullIcon").split(",");this.setData("emptyIconArray",t),this.setData("fullIconArray",e),this.setData("hoverFullIconArray",a)}this.setData("ltPropCount",2),this.setData("ltPropHalfIncrement",!1),this.setData("ltPropClearable",!0)}else"toggle"==this.getData("ltPropType")?("custom"!=this.getData("ltPropAppearance")&&(this.setData("ltPropAppearance","heart"),this.setData("ltPropEmptyIcon","lrcToggleEmpty"),this.setData("ltPropFullIcon","lrcToggleFill"),this.setData("ltPropHoverFullIcon","lrcToggleHover2")),this.setData("ltPropCount",1),this.setData("ltPropHalfIncrement",!1),this.setData("ltPropClearable",!0)):"heart"==this.getData("ltPropAppearance")?(this.$node.classList.add("heart"),this.setData("ltPropEmptyIcon","lyteRatingEmpty"),this.setData("ltPropFullIcon","lyteRatingFilled"),this.setData("ltPropHoverFullIcon","lyteRatingHoverFilled"),this.getData("ltPropHalfIncrement")&&(this.setData("ltPropHalfIcon","lyteRatingHalf"),this.setData("ltPropHoverHalfIcon","lyteRatingHoverHalf"))):"lineHeart"==this.getData("ltPropAppearance")?(this.$node.classList.add("lineHeart"),this.setData("ltPropEmptyIcon","lyteRatingEmpty"),this.setData("ltPropFullIcon","lyteRatingFilled"),this.setData("ltPropHoverFullIcon","lyteRatingHoverFilled"),this.getData("ltPropHalfIncrement")&&(this.setData("ltPropHalfIcon","lyteRatingHalf"),this.setData("ltPropHoverHalfIcon","lyteRatingHoverHalf"))):"lineStar"==this.getData("ltPropAppearance")?(this.$node.classList.add("lineStar"),this.setData("ltPropEmptyIcon","lyteRatingEmpty"),this.setData("ltPropFullIcon","lyteRatingFilled"),this.setData("ltPropHoverFullIcon","lyteRatingHoverFilled"),this.getData("ltPropHalfIncrement")&&(this.setData("ltPropHalfIcon","lyteRatingHalf"),this.setData("ltPropHoverHalfIcon","lyteRatingHoverHalf"))):"custom"!=this.getData("ltPropAppearance")&&(this.setData("ltPropAppearance","star"),this.$node.classList.add("star"),this.setData("ltPropEmptyIcon","lyteRatingEmpty"),this.setData("ltPropFullIcon","lyteRatingFilled"),this.setData("ltPropHoverFullIcon","lyteRatingHoverFilled"),this.getData("ltPropHalfIncrement")&&(this.setData("ltPropHalfIcon","lyteRatingHalf"),this.setData("ltPropHoverHalfIcon","lyteRatingHoverHalf")));if(this.getData("ltPropCount")!=this.getData("countArray").length){for(var s=[],i=1;i<=this.getData("ltPropCount");i++)s.push(i);this.setData("countArray",s)}}.observes("ltPropType","ltPropCount","ltPropHalfIncrement").on("init"),appearanceChanged:function(){var t=this.getData("ltPropType");this.setData("ltPropType",""),this.setData("ltPropType",t)}.observes("ltPropAppearance"),didConnectFn:function(){this.setRating(),this.rendered||(this.getMethods("onRender")&&this.executeMethod("onRender",this),this.getData("ltPropValue")>0&&(this.rated=!0),this.rendered=!0)}.observes("ltPropValue").on("didConnect"),setRating:function(){this.clearHoverClasses();var t=this.getData("ltPropValue"),e=this.$node.querySelectorAll(".lyteRated"),a=this.$node.querySelectorAll("lyte-rate-icon");if("switch"==this.getData("ltPropType")){if(e.length){var l=parseInt(e[0].getAttribute("data-lrc"));e[0].classList.remove(this.getClass(l-1,"fi"),"lyteRated")}t>0&&a[t-1].classList.add(this.getClass(t-1,"fi"),"lyteRated")}else if("multiple"===this.getData("ltPropType")&&"smiley"!=this.getData("ltPropAppearance")){if(t%1!=0){for(var r=0;r<Math.floor(t);r++)a[r].classList.add(this.getClass(r,"fi"),"lyteRated");for(r=Math.floor(t);r<a.length;r++)a[r].classList.remove(this.getClass(r,"fi"),this.getClass(r,"hi"),"lyteRated");a[Math.ceil(t)-1].classList.add(this.getClass(Math.ceil(t)-1,"hi"),"lyteRated")}else if(e.length>0&&this.getData("halfIconArray").length&&e[e.length-1].classList.contains(this.getClass(e.length-1,"hi"))&&(e[e.length-1].classList.remove(this.getClass(e.length-1,"hi")),e[e.length-1].classList.add(this.getClass(e.length-1,"fi"))),t<e.length)for(r=t;r<e.length;r++)e[r].classList.remove(this.getClass(r,"fi"),"lyteRated"),this.getData("halfIconArray").length&&e[r].classList.remove(this.getClass(r,"hi"));else if(t>e.length)for(r=e.length;r<t&&r<a.length;r++)a[r].classList.add(this.getClass(r,"fi"),"lyteRated")}else if(t%1!=0){for(r=0;r<Math.floor(t);r++)a[r].classList.add(this.getData("ltPropFullIcon"),"lyteRated");for(r=Math.floor(t);r<a.length;r++)a[r].classList.remove(this.getData("ltPropFullIcon"),this.getData("ltPropHalfIcon"),"lyteRated");a[Math.ceil(t)-1].classList.add(this.getData("ltPropHalfIcon"),"lyteRated")}else if(e.length>0&&this.getData("ltPropHalfIcon")&&e[e.length-1].classList.contains(this.getData("ltPropHalfIcon"))&&(e[e.length-1].classList.remove(this.getData("ltPropHalfIcon")),e[e.length-1].classList.add(this.getData("ltPropFullIcon"))),t<e.length)for(r=t;r<e.length;r++)e[r].classList.remove(this.getData("ltPropFullIcon"),"lyteRated"),this.getData("ltPropHalfIcon")&&e[r].classList.remove(this.getData("ltPropHalfIcon"));else if(t>e.length)for(r=e.length;r<t&&r<a.length;r++)a[r].classList.add(this.getData("ltPropFullIcon"),"lyteRated");this.getMethods("onClick")&&this.executeMethod("onClick",this.getData("ltPropValue"),this)},getClass:function(t,e){return"fi"==e?Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("fullIconArray"),t):"hi"==e?Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("halfIconArray"),t):"hfi"==e?Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("hoverFullIconArray"),t):"hhi"==e?Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("hoverHalfIconArray"),t):void 0},clearHoverClasses:function(){for(var t=this.$node.querySelectorAll(".lyteRatingHover"),e=0;e<t.length;e++)"switch"==this.getData("ltPropType")?t[e].classList.remove(this.getClass(parseInt(t[e].getAttribute("data-lrc"))-1,"hfi"),"lyteRatingHover"):"multiple"==this.getData("ltPropType")&&"smiley"!=this.getData("ltPropAppearance")?(t[e].classList.remove(this.getClass(parseInt(t[e].getAttribute("data-lrc"))-1,"hfi"),"lyteRatingHover"),this.getData("hoverHalfIconArray").length&&t[e].classList.remove(this.getClass(parseInt(t[e].getAttribute("data-lrc"))-1,"hhi"),"lyteRatingHover")):t[e].classList.remove(this.getData("ltPropHoverFullIcon"),this.getData("ltPropHoverHalfIcon"),"lyteRatingHover")},getCurrentValue:function(t,e){var a=parseInt(e.getAttribute("data-lrc"));if(this.getData("ltPropHalfIncrement")){var l=e.getBoundingClientRect();t.clientX<=l.left+l.width/2&&(a=a-1+.5)}return a},onClick:function(t){if(this.getData("ltPropClearable"))if(this.rated&&this.getData("currentHover")==this.getData("ltPropValue"))this.setData("ltPropValue",0),this.rated=!1,this.setData("currentHover",0);else{var e=this.getCurrentValue(t,t.target.closest("lyte-rate-icon"));e!=this.getData("currentHover")&&this.setData("currentHover",e),this.setData("ltPropValue",this.getData("currentHover")),this.rated=!0}else this.setData("ltPropValue",this.getData("currentHover"))},onOver:function(t){var e=t.target,a=parseInt(e.getAttribute("data-lrc")),l=this.getData("currentHover"),r=this.$node.querySelectorAll("lyte-rate-icon"),s=l;if("switch"==this.getData("ltPropType"))r[a-1].classList.add(Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("hoverFullIconArray"),a-1),"lyteRatingHover"),this.setData("currentHover",a);else if("multiple"==this.getData("ltPropType")&&"smiley"!=this.getData("ltPropAppearance"))if(this.getData("ltPropHalfIncrement")){l=Math.round(l);var i=e.getBoundingClientRect();if(a-1<l)for(var o=a-1;o<l;o++)r[o].classList.remove(this.getClass(o,"hfi"),this.getClass(o,"hhi"),"lyteRatingHover");else if(a-1>l)for(o=l;o<a-1;o++)r[o].classList.add(this.getClass(o,"hfi"),"lyteRatingHover");e.classList.remove(this.getClass(a,"hfi"),this.getClass(a,"hhi"),"lyteRatingHover"),t.clientX>i.left+i.width/2?(e.classList.add(this.getClass(a,"hfi"),"lyteRatingHover"),this.setData("currentHover",a)):(e.classList.add(this.getClass(a,"hhi"),"lyteRatingHover"),this.setData("currentHover",a-1+.5))}else{if(a>l)for(o=l;o<a;o++)r[o].classList.add(this.getClass(o,"hfi"),"lyteRatingHover");else if(a<l)for(o=a;o<l;o++)r[o].classList.remove(this.getClass(o,"hfi"),"lyteRatingHover");this.setData("currentHover",a)}else if(this.getData("ltPropHalfIncrement")){l=Math.round(l);i=e.getBoundingClientRect();if(a-1<l)for(o=a-1;o<l;o++)r[o].classList.remove(this.getData("ltPropHoverFullIcon"),this.getData("ltPropHoverHalfIcon"),"lyteRatingHover");else if(a-1>l)for(o=l;o<a-1;o++)r[o].classList.add(this.getData("ltPropHoverFullIcon"),"lyteRatingHover");e.classList.remove(this.getData("ltPropHoverFullIcon"),this.getData("ltPropHoverHalfIcon"),"lyteRatingHover"),t.clientX>i.left+i.width/2?(e.classList.add(this.getData("ltPropHoverFullIcon"),"lyteRatingHover"),this.setData("currentHover",a)):(e.classList.add(this.getData("ltPropHoverHalfIcon"),"lyteRatingHover"),this.setData("currentHover",a-1+.5))}else{if(a>l)for(o=l;o<a;o++)r[o].classList.add(this.getData("ltPropHoverFullIcon"),"lyteRatingHover");else if(a<l)for(o=a;o<l;o++)r[o].classList.remove(this.getData("ltPropHoverFullIcon"),"lyteRatingHover");this.setData("currentHover",a)}s!=this.getData("currentHover")&&this.getMethods("onHover")&&this.executeMethod("onHover",this.getData("currentHover"),this)},onOut:function(t){var e=t.target;if("switch"==this.getData("ltPropType"))e.classList.remove(Lyte.Component.registeredHelpers.lyteUiGetArrayValueByIndex(this.getData("hoverFullIconArray"),parseInt(e.getAttribute("data-lrc"))-1),"lyteRatingHover"),this.setData("currentHover",0);else{var a=this.$node.querySelectorAll("lyte-rate-icon"),l=a[0].getBoundingClientRect().left,r=a[a.length-1].getBoundingClientRect().right,s=e.getBoundingClientRect();if(t.clientX<=l||t.clientX>=r||t.clientY<=s.top||t.clientY>=s.bottom){for(var i=this.$node.querySelectorAll(".lyteRatingHover"),o=0;o<i.length;o++)"multiple"==this.getData("ltPropType")&&"smiley"!=this.getData("ltPropAppearance")?(i[o].classList.remove(this.getClass(o,"hfi"),"lyteRatingHover"),this.getData("halfIconArray").length&&i[o].classList.remove(this.getClass(o,"hhi"))):(i[o].classList.remove(this.getData("ltPropHoverFullIcon"),"lyteRatingHover"),this.getData("ltPropHoverHalfIcon")&&i[o].classList.remove(this.getData("ltPropHoverHalfIcon")));this.setData("currentHover",0)}}this.getMethods("onOut")&&this.executeMethod("onOut",parseInt(e.getAttribute("data-lrc")),this)}}),_lyteUiUtils.registeredCustomElements["lyte-rate-icon"]||(_lyteUiUtils.registeredCustomElements["lyte-rate-icon"]=!0,Lyte.createCustomElement("lyte-rate-icon",{static:{},connectedCallback:function(){var t=this.closest("lyte-rating").component;this.addEventListener("click",t.onClick.bind(t)),this.addEventListener("mousemove",t.onOver.bind(t)),this.addEventListener("mouseout",t.onOut.bind(t)),t.getData("ltPropYield")&&(t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=!1),t.timeoutId=setTimeout(function(){for(var t=this.closest("lyte-rating").querySelectorAll("lyte-rate-icon"),e=0;e<t.length;e++)t[e].setAttribute("data-lrc",e+1)}.bind(this),100))},disconnectedCallback:function(){}}));